This directory contains the data types for the verifier log entry, and
their parsers and serializers.

This directory DOES NOT depend on the rest of Veritas, but it is used
by the rest of Veritas, unless stated otherwise.


Contents:

* Veritas.Formats.Types.fst: data type definitions.
  DOES NOT depend on EverParse.

* Veritas.Formats.fsti: declarations of parsers and serializers.
  DOES NOT depend on EverParse.

* dist/ : C implementation of parsers and serializers.
  DOES NOT depend on EverParse.

* everparse/ : formal definitions of parsers and serializers.
  DOES depend on EverParse.
  This directory is needed only to regenerate dist/ .
  This directory is NOT used by the rest of Veritas.

  + everparse/Veritas.Formats.rfc: EverParse data format description
    for the verifier log entry.

  + everparse/Veritas.Formats.fst: glue code between the declarations
    of parsers and serializers in Veritas.Formats.fsti and their
    actual formal definitions that are automatically generated by
    EverParse.


Usage:

* `make` (or `make all`) will build `dist/veritasformats.a`, by
  compiling the parser and serializer implementations, so that the
  obtained archive is ready to be linked with the rest of Veritas.
  DOES NOT depend on EverParse.

* `make regen` will regenerate the C parser and serializer
  implementations in `dist/`, and compile them again. It is NOT
  necessary to do that step, unless the contents of everparse/
  changes.
  DOES depend on EverParse, with two scenarios:

  + you do not need to download EverParse yourself. By default, `make
    regen` will automatically download an EverParse binary release and
    use it to regenerate dist/

  + however, you can instead use a custom EverParse source tree from
    https://github.com/project-everest/everparse/ . Just set the
    QD_HOME environment variable to the root directory of that tree.

    NOTE: if you do so, then you will need to compile EverParse
    yourself, by running `make quackyducky` in your EverParse source
    tree. This step needs OCaml.


BEGIN TECHNICAL NOTE (not user-relevant)

TODO: `make regen` should automatically regenerate
Veritas.Formats.Types.fst from
everparse/Veritas.Formats.rfc. Currently, Veritas.Formats.Types.fst
has to be manually kept in sync with everparse/Veritas.Formats.rfc by
removing the -types_from option from the QuackyDucky invocation in
everparse/Makefile.qd, then moving the data type definitions
(automatically generated by EverParse in everparse/obj/*.fsti) into
Veritas.Formats.Types.fst

END TECHNICAL NOTE
