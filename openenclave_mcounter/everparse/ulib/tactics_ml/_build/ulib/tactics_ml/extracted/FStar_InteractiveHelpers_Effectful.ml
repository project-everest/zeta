open Prims
type cast_info =
  {
  term: FStar_Reflection_Types.term ;
  p_ty:
    FStar_InteractiveHelpers_ExploreTerm.type_info
      FStar_Pervasives_Native.option
    ;
  exp_ty:
    FStar_InteractiveHelpers_ExploreTerm.type_info
      FStar_Pervasives_Native.option
    }
let (__proj__Mkcast_info__item__term :
  cast_info -> FStar_Reflection_Types.term) =
  fun projectee -> match projectee with | { term; p_ty; exp_ty;_} -> term
let (__proj__Mkcast_info__item__p_ty :
  cast_info ->
    FStar_InteractiveHelpers_ExploreTerm.type_info
      FStar_Pervasives_Native.option)
  = fun projectee -> match projectee with | { term; p_ty; exp_ty;_} -> p_ty
let (__proj__Mkcast_info__item__exp_ty :
  cast_info ->
    FStar_InteractiveHelpers_ExploreTerm.type_info
      FStar_Pervasives_Native.option)
  = fun projectee -> match projectee with | { term; p_ty; exp_ty;_} -> exp_ty
let (mk_cast_info :
  FStar_Reflection_Types.term ->
    FStar_InteractiveHelpers_ExploreTerm.type_info
      FStar_Pervasives_Native.option ->
      FStar_InteractiveHelpers_ExploreTerm.type_info
        FStar_Pervasives_Native.option -> cast_info)
  = fun t -> fun p_ty -> fun exp_ty -> { term = t; p_ty; exp_ty }
let (cast_info_to_string : cast_info -> Prims.string) =
  fun info ->
    Prims.strcat "Mkcast_info ("
      (Prims.strcat (FStar_Reflection_Builtins.term_to_string info.term)
         (Prims.strcat ") ("
            (Prims.strcat
               (FStar_InteractiveHelpers_Base.option_to_string
                  FStar_InteractiveHelpers_ExploreTerm.type_info_to_string
                  info.p_ty)
               (Prims.strcat ") ("
                  (Prims.strcat
                     (FStar_InteractiveHelpers_Base.option_to_string
                        FStar_InteractiveHelpers_ExploreTerm.type_info_to_string
                        info.exp_ty) ")")))))
type effect_info =
  {
  ei_type: FStar_InteractiveHelpers_ExploreTerm.effect_type ;
  ei_ret_type: FStar_InteractiveHelpers_ExploreTerm.type_info ;
  ei_pre: FStar_Reflection_Types.term FStar_Pervasives_Native.option ;
  ei_post: FStar_Reflection_Types.term FStar_Pervasives_Native.option }
let (__proj__Mkeffect_info__item__ei_type :
  effect_info -> FStar_InteractiveHelpers_ExploreTerm.effect_type) =
  fun projectee ->
    match projectee with
    | { ei_type; ei_ret_type; ei_pre; ei_post;_} -> ei_type
let (__proj__Mkeffect_info__item__ei_ret_type :
  effect_info -> FStar_InteractiveHelpers_ExploreTerm.type_info) =
  fun projectee ->
    match projectee with
    | { ei_type; ei_ret_type; ei_pre; ei_post;_} -> ei_ret_type
let (__proj__Mkeffect_info__item__ei_pre :
  effect_info -> FStar_Reflection_Types.term FStar_Pervasives_Native.option)
  =
  fun projectee ->
    match projectee with
    | { ei_type; ei_ret_type; ei_pre; ei_post;_} -> ei_pre
let (__proj__Mkeffect_info__item__ei_post :
  effect_info -> FStar_Reflection_Types.term FStar_Pervasives_Native.option)
  =
  fun projectee ->
    match projectee with
    | { ei_type; ei_ret_type; ei_pre; ei_post;_} -> ei_post
let (mk_effect_info :
  FStar_InteractiveHelpers_ExploreTerm.effect_type ->
    FStar_InteractiveHelpers_ExploreTerm.type_info ->
      FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
        FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
          effect_info)
  =
  fun uu___ ->
    fun uu___1 ->
      fun uu___2 ->
        fun uu___3 ->
          {
            ei_type = uu___;
            ei_ret_type = uu___1;
            ei_pre = uu___2;
            ei_post = uu___3
          }
let (effect_info_to_string : effect_info -> Prims.string) =
  fun c ->
    Prims.strcat "Mkeffect_info "
      (Prims.strcat
         (FStar_InteractiveHelpers_ExploreTerm.effect_type_to_string
            c.ei_type)
         (Prims.strcat " ("
            (Prims.strcat
               (FStar_InteractiveHelpers_Base.option_to_string
                  FStar_Reflection_Builtins.term_to_string c.ei_pre)
               (Prims.strcat ") ("
                  (Prims.strcat
                     (FStar_InteractiveHelpers_ExploreTerm.type_info_to_string
                        c.ei_ret_type)
                     (Prims.strcat ") ("
                        (Prims.strcat
                           (FStar_InteractiveHelpers_Base.option_to_string
                              FStar_Reflection_Builtins.term_to_string
                              c.ei_post) ")")))))))
type eterm_info =
  {
  einfo: effect_info ;
  head: FStar_Reflection_Types.term ;
  parameters: cast_info Prims.list }
let (__proj__Mketerm_info__item__einfo : eterm_info -> effect_info) =
  fun projectee ->
    match projectee with | { einfo; head; parameters;_} -> einfo
let (__proj__Mketerm_info__item__head :
  eterm_info -> FStar_Reflection_Types.term) =
  fun projectee ->
    match projectee with | { einfo; head; parameters;_} -> head
let (__proj__Mketerm_info__item__parameters :
  eterm_info -> cast_info Prims.list) =
  fun projectee ->
    match projectee with | { einfo; head; parameters;_} -> parameters
let (eterm_info_to_string : eterm_info -> Prims.string) =
  fun info ->
    let params =
      FStar_List_Tot_Base.map
        (fun x ->
           Prims.strcat "(" (Prims.strcat (cast_info_to_string x) ");  \n"))
        info.parameters in
    let params_str =
      FStar_List_Tot_Base.fold_left (fun x -> fun y -> Prims.strcat x y) ""
        params in
    Prims.strcat "Mketerm_info ("
      (Prims.strcat (effect_info_to_string info.einfo)
         (Prims.strcat ") ("
            (Prims.strcat
               (FStar_Reflection_Builtins.term_to_string info.head)
               (Prims.strcat ")\n[" (Prims.strcat params_str "]")))))
let (mk_eterm_info :
  effect_info ->
    FStar_Reflection_Types.term -> cast_info Prims.list -> eterm_info)
  =
  fun uu___ ->
    fun uu___1 ->
      fun uu___2 -> { einfo = uu___; head = uu___1; parameters = uu___2 }
let rec (decompose_application_aux :
  FStar_Reflection_Types.env ->
    FStar_Reflection_Types.term ->
      FStar_Tactics_Types.proofstate ->
        (FStar_Reflection_Types.term * cast_info Prims.list)
          FStar_Tactics_Result.__result)
  =
  fun e ->
    fun t ->
      fun ps ->
        match (FStar_Tactics_Builtins.inspect t)
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (81)) (Prims.of_int (8))
                            (Prims.of_int (81)) (Prims.of_int (17))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (81)) (Prims.of_int (2))
                              (Prims.of_int (102)) (Prims.of_int (14)))))
             with
             | true ->
                 ((match a with
                   | FStar_Reflection_Data.Tv_App (hd, (a1, qualif)) ->
                       (fun ps1 ->
                          match (decompose_application_aux e hd)
                                  (FStar_Tactics_Types.incr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps1
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (83))
                                              (Prims.of_int (22))
                                              (Prims.of_int (83))
                                              (Prims.of_int (52))))))
                          with
                          | FStar_Tactics_Result.Success (a2, ps'1) ->
                              (match FStar_Tactics_Types.tracepoint
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (83))
                                                (Prims.of_int (4))
                                                (Prims.of_int (101))
                                                (Prims.of_int (28)))))
                               with
                               | true ->
                                   ((match a2 with
                                     | (hd0, params) ->
                                         (fun ps2 ->
                                            match (FStar_InteractiveHelpers_ExploreTerm.get_type_info
                                                     e a1)
                                                    (FStar_Tactics_Types.incr_depth
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (85))
                                                                (Prims.of_int (17))
                                                                (Prims.of_int (85))
                                                                (Prims.of_int (34))))))
                                            with
                                            | FStar_Tactics_Result.Success
                                                (a3, ps'2) ->
                                                (match FStar_Tactics_Types.tracepoint
                                                         (FStar_Tactics_Types.set_proofstate_range
                                                            ps'2
                                                            (FStar_Range.prims_to_fstar_range
                                                               (Prims.mk_range
                                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                  (Prims.of_int (87))
                                                                  (Prims.of_int (4))
                                                                  (Prims.of_int (101))
                                                                  (Prims.of_int (28)))))
                                                 with
                                                 | true ->
                                                     (match (FStar_InteractiveHelpers_ExploreTerm.safe_tc
                                                               e hd)
                                                              (FStar_Tactics_Types.incr_depth
                                                                 (FStar_Tactics_Types.set_proofstate_range
                                                                    (
                                                                    FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (87))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (28))))))
                                                                    (
                                                                    FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (87))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (87))
                                                                    (Prims.of_int (28))))))
                                                      with
                                                      | FStar_Tactics_Result.Success
                                                          (a4, ps'3) ->
                                                          (match FStar_Tactics_Types.tracepoint
                                                                   (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (88))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (28)))))
                                                           with
                                                           | true ->
                                                               (match 
                                                                  (match a4
                                                                   with
                                                                   | 
                                                                   FStar_Pervasives_Native.None
                                                                    ->
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    s))
                                                                   | 
                                                                   FStar_Pervasives_Native.Some
                                                                    hd_ty' ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_Tactics_Builtins.inspect
                                                                    hd_ty')
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (92))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (92))
                                                                    (Prims.of_int (28))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (92))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (98))
                                                                    (Prims.of_int (19)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a5
                                                                    with
                                                                    | FStar_Reflection_Data.Tv_Arrow
                                                                    (b, c) ->
                                                                    (fun ps4
                                                                    ->
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (94))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (94))
                                                                    (Prims.of_int (38))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (94))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match 
                                                                    FStar_Reflection_Builtins.inspect_binder
                                                                    b
                                                                    with
                                                                    | (bv,
                                                                    uu___) ->
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (95))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (95))
                                                                    (Prims.of_int (35))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (95))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (95))
                                                                    (Prims.of_int (35))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (32))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_ExploreTerm.get_type_info_from_type
                                                                    (FStar_Reflection_Builtins.inspect_bv
                                                                    bv).FStar_Reflection_Data.bv_sort)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (95))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (95))
                                                                    (Prims.of_int (35))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (96))
                                                                    (Prims.of_int (32))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_Pervasives_Native.Some
                                                                    a6),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (94))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (94))
                                                                    (Prims.of_int (38))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (94))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (97))
                                                                    (Prims.of_int (43)))))))
                                                                    | uu___
                                                                    ->
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    s))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (92))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (98))
                                                                    (Prims.of_int (19)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4)))
                                                                    (
                                                                    FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (88))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (28))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (89))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (98))
                                                                    (Prims.of_int (19))))))
                                                                with
                                                                | FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'4) ->
                                                                    (
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (28)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((hd0,
                                                                    ((mk_cast_info
                                                                    a1 a3 a5)
                                                                    ::
                                                                    params)),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (28))))))))
                                                                | FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4)))
                                                      | FStar_Tactics_Result.Failed
                                                          (e1, ps'3) ->
                                                          FStar_Tactics_Result.Failed
                                                            (e1, ps'3)))
                                            | FStar_Tactics_Result.Failed
                                                (e1, ps'2) ->
                                                FStar_Tactics_Result.Failed
                                                  (e1, ps'2))))
                                     (FStar_Tactics_Types.decr_depth
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps'1
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range
                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                 (Prims.of_int (83))
                                                 (Prims.of_int (4))
                                                 (Prims.of_int (101))
                                                 (Prims.of_int (28)))))))
                          | FStar_Tactics_Result.Failed (e1, ps'1) ->
                              FStar_Tactics_Result.Failed (e1, ps'1))
                   | uu___ ->
                       (fun s -> FStar_Tactics_Result.Success ((t, []), s))))
                   (FStar_Tactics_Types.decr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps'
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (81)) (Prims.of_int (2))
                               (Prims.of_int (102)) (Prims.of_int (14)))))))
        | FStar_Tactics_Result.Failed (e1, ps') ->
            FStar_Tactics_Result.Failed (e1, ps')
let (decompose_application :
  FStar_Reflection_Types.env ->
    FStar_Reflection_Types.term ->
      FStar_Tactics_Types.proofstate ->
        (FStar_Reflection_Types.term * cast_info Prims.list)
          FStar_Tactics_Result.__result)
  =
  fun e ->
    fun t ->
      fun ps ->
        match (decompose_application_aux e t)
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (106)) (Prims.of_int (19))
                            (Prims.of_int (106)) (Prims.of_int (48))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (106)) (Prims.of_int (2))
                              (Prims.of_int (107)) (Prims.of_int (25)))))
             with
             | true ->
                 FStar_Tactics_Result.Success
                   (((match a with
                      | (hd, params) ->
                          (hd, (FStar_List_Tot_Base.rev params)))),
                     (FStar_Tactics_Types.decr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps'
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (106)) (Prims.of_int (2))
                                 (Prims.of_int (107)) (Prims.of_int (25))))))))
        | FStar_Tactics_Result.Failed (e1, ps') ->
            FStar_Tactics_Result.Failed (e1, ps')
let (comp_view_to_effect_info :
  Prims.bool ->
    FStar_Reflection_Data.comp_view ->
      FStar_Tactics_Types.proofstate ->
        effect_info FStar_Pervasives_Native.option
          FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun cv ->
      match cv with
      | FStar_Reflection_Data.C_Total (ret_ty, decr) ->
          (fun ps ->
             match (FStar_InteractiveHelpers_ExploreTerm.get_type_info_from_type
                      ret_ty)
                     (FStar_Tactics_Types.incr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (115)) (Prims.of_int (24))
                                 (Prims.of_int (115)) (Prims.of_int (54))))))
             with
             | FStar_Tactics_Result.Success (a, ps') ->
                 (match FStar_Tactics_Types.tracepoint
                          (FStar_Tactics_Types.set_proofstate_range ps'
                             (FStar_Range.prims_to_fstar_range
                                (Prims.mk_range
                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                   (Prims.of_int (116)) (Prims.of_int (4))
                                   (Prims.of_int (116)) (Prims.of_int (57)))))
                  with
                  | true ->
                      FStar_Tactics_Result.Success
                        ((FStar_Pervasives_Native.Some
                            (mk_effect_info
                               FStar_InteractiveHelpers_ExploreTerm.E_Total a
                               FStar_Pervasives_Native.None
                               FStar_Pervasives_Native.None)),
                          (FStar_Tactics_Types.decr_depth
                             (FStar_Tactics_Types.set_proofstate_range ps'
                                (FStar_Range.prims_to_fstar_range
                                   (Prims.mk_range
                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                      (Prims.of_int (116)) (Prims.of_int (4))
                                      (Prims.of_int (116))
                                      (Prims.of_int (57))))))))
             | FStar_Tactics_Result.Failed (e, ps') ->
                 FStar_Tactics_Result.Failed (e, ps'))
      | FStar_Reflection_Data.C_GTotal (ret_ty, decr) ->
          (fun ps ->
             match (FStar_InteractiveHelpers_ExploreTerm.get_type_info_from_type
                      ret_ty)
                     (FStar_Tactics_Types.incr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (118)) (Prims.of_int (24))
                                 (Prims.of_int (118)) (Prims.of_int (54))))))
             with
             | FStar_Tactics_Result.Success (a, ps') ->
                 (match FStar_Tactics_Types.tracepoint
                          (FStar_Tactics_Types.set_proofstate_range ps'
                             (FStar_Range.prims_to_fstar_range
                                (Prims.mk_range
                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                   (Prims.of_int (119)) (Prims.of_int (4))
                                   (Prims.of_int (119)) (Prims.of_int (57)))))
                  with
                  | true ->
                      FStar_Tactics_Result.Success
                        ((FStar_Pervasives_Native.Some
                            (mk_effect_info
                               FStar_InteractiveHelpers_ExploreTerm.E_Total a
                               FStar_Pervasives_Native.None
                               FStar_Pervasives_Native.None)),
                          (FStar_Tactics_Types.decr_depth
                             (FStar_Tactics_Types.set_proofstate_range ps'
                                (FStar_Range.prims_to_fstar_range
                                   (Prims.mk_range
                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                      (Prims.of_int (119)) (Prims.of_int (4))
                                      (Prims.of_int (119))
                                      (Prims.of_int (57))))))))
             | FStar_Tactics_Result.Failed (e, ps') ->
                 FStar_Tactics_Result.Failed (e, ps'))
      | FStar_Reflection_Data.C_Lemma (pre, post, patterns) ->
          (fun ps ->
             match (FStar_InteractiveHelpers_Base.prettify_term dbg pre)
                     (FStar_Tactics_Types.incr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (122)) (Prims.of_int (14))
                                 (Prims.of_int (122)) (Prims.of_int (35))))))
             with
             | FStar_Tactics_Result.Success (a, ps') ->
                 (match FStar_Tactics_Types.tracepoint
                          (FStar_Tactics_Types.set_proofstate_range ps'
                             (FStar_Range.prims_to_fstar_range
                                (Prims.mk_range
                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                   (Prims.of_int (123)) (Prims.of_int (4))
                                   (Prims.of_int (124)) (Prims.of_int (71)))))
                  with
                  | true ->
                      (match (FStar_InteractiveHelpers_Base.prettify_term dbg
                                post)
                               (FStar_Tactics_Types.incr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     (FStar_Tactics_Types.decr_depth
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps'
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range
                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                 (Prims.of_int (123))
                                                 (Prims.of_int (4))
                                                 (Prims.of_int (124))
                                                 (Prims.of_int (71))))))
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (123))
                                           (Prims.of_int (15))
                                           (Prims.of_int (123))
                                           (Prims.of_int (37))))))
                       with
                       | FStar_Tactics_Result.Success (a1, ps'1) ->
                           (match FStar_Tactics_Types.tracepoint
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps'1
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (124))
                                             (Prims.of_int (4))
                                             (Prims.of_int (124))
                                             (Prims.of_int (71)))))
                            with
                            | true ->
                                FStar_Tactics_Result.Success
                                  ((FStar_Pervasives_Native.Some
                                      (mk_effect_info
                                         FStar_InteractiveHelpers_ExploreTerm.E_Lemma
                                         FStar_InteractiveHelpers_ExploreTerm.unit_type_info
                                         (FStar_Pervasives_Native.Some a)
                                         (FStar_Pervasives_Native.Some a1))),
                                    (FStar_Tactics_Types.decr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (124))
                                                (Prims.of_int (4))
                                                (Prims.of_int (124))
                                                (Prims.of_int (71))))))))
                       | FStar_Tactics_Result.Failed (e, ps'1) ->
                           FStar_Tactics_Result.Failed (e, ps'1)))
             | FStar_Tactics_Result.Failed (e, ps') ->
                 FStar_Tactics_Result.Failed (e, ps'))
      | FStar_Reflection_Data.C_Eff (univs, eff_name, ret_ty, eff_args) ->
          (fun ps ->
             match (FStar_InteractiveHelpers_Base.print_dbg dbg
                      (Prims.strcat "comp_view_to_effect_info: C_Eff "
                         (FStar_Reflection_Derived.flatten_name eff_name)))
                     (FStar_Tactics_Types.incr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (126)) (Prims.of_int (4))
                                 (Prims.of_int (126)) (Prims.of_int (78))))))
             with
             | FStar_Tactics_Result.Success (a, ps') ->
                 (match FStar_Tactics_Types.tracepoint
                          (FStar_Tactics_Types.set_proofstate_range ps'
                             (FStar_Range.prims_to_fstar_range
                                (Prims.mk_range
                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                   (Prims.of_int (127)) (Prims.of_int (4))
                                   (Prims.of_int (143)) (Prims.of_int (7)))))
                  with
                  | true ->
                      (match (FStar_InteractiveHelpers_ExploreTerm.get_type_info_from_type
                                ret_ty)
                               (FStar_Tactics_Types.incr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     (FStar_Tactics_Types.decr_depth
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps'
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range
                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                 (Prims.of_int (127))
                                                 (Prims.of_int (4))
                                                 (Prims.of_int (143))
                                                 (Prims.of_int (7))))))
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (127))
                                           (Prims.of_int (24))
                                           (Prims.of_int (127))
                                           (Prims.of_int (54))))))
                       with
                       | FStar_Tactics_Result.Success (a1, ps'1) ->
                           (match FStar_Tactics_Types.tracepoint
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps'1
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (128))
                                             (Prims.of_int (4))
                                             (Prims.of_int (143))
                                             (Prims.of_int (7)))))
                            with
                            | true ->
                                (match FStar_Tactics_Types.tracepoint
                                         (FStar_Tactics_Types.set_proofstate_range
                                            (FStar_Tactics_Types.incr_depth
                                               (FStar_Tactics_Types.set_proofstate_range
                                                  (FStar_Tactics_Types.decr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'1
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (128))
                                                              (Prims.of_int (4))
                                                              (Prims.of_int (143))
                                                              (Prims.of_int (7))))))
                                                  (FStar_Range.prims_to_fstar_range
                                                     (Prims.mk_range
                                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                        (Prims.of_int (128))
                                                        (Prims.of_int (16))
                                                        (Prims.of_int (128))
                                                        (Prims.of_int (44))))))
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (129))
                                                  (Prims.of_int (4))
                                                  (Prims.of_int (143))
                                                  (Prims.of_int (7)))))
                                 with
                                 | true ->
                                     (match FStar_Tactics_Types.tracepoint
                                              (FStar_Tactics_Types.set_proofstate_range
                                                 (FStar_Tactics_Types.incr_depth
                                                    (FStar_Tactics_Types.set_proofstate_range
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             (FStar_Tactics_Types.incr_depth
                                                                (FStar_Tactics_Types.set_proofstate_range
                                                                   (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (128))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (143))
                                                                    (Prims.of_int (7))))))
                                                                   (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (128))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (128))
                                                                    (Prims.of_int (44))))))
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (129))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (143))
                                                                   (Prims.of_int (7))))))
                                                       (FStar_Range.prims_to_fstar_range
                                                          (Prims.mk_range
                                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                             (Prims.of_int (129))
                                                             (Prims.of_int (17))
                                                             (Prims.of_int (129))
                                                             (Prims.of_int (51))))))
                                                 (FStar_Range.prims_to_fstar_range
                                                    (Prims.mk_range
                                                       "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                       (Prims.of_int (130))
                                                       (Prims.of_int (4))
                                                       (Prims.of_int (143))
                                                       (Prims.of_int (7)))))
                                      with
                                      | true ->
                                          (match (FStar_Tactics_Util.map
                                                    (fun uu___ ->
                                                       match uu___ with
                                                       | (x, a2) ->
                                                           (fun ps1 ->
                                                              match (FStar_InteractiveHelpers_Base.prettify_term
                                                                    dbg x)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (38))
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (57))))))
                                                              with
                                                              | FStar_Tactics_Result.Success
                                                                  (a3, ps'2)
                                                                  ->
                                                                  (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (37))
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (61)))))
                                                                   with
                                                                   | 
                                                                   true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a3, a2),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (37))
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (61))))))))
                                                              | FStar_Tactics_Result.Failed
                                                                  (e, ps'2)
                                                                  ->
                                                                  FStar_Tactics_Result.Failed
                                                                    (e, ps'2)))
                                                    eff_args)
                                                   (FStar_Tactics_Types.incr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         (FStar_Tactics_Types.decr_depth
                                                            (FStar_Tactics_Types.set_proofstate_range
                                                               (FStar_Tactics_Types.incr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (128))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (143))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (128))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (128))
                                                                    (Prims.of_int (44))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (129))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (143))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (129))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (129))
                                                                    (Prims.of_int (51))))))
                                                               (FStar_Range.prims_to_fstar_range
                                                                  (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (130))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (143))
                                                                    (Prims.of_int (7))))))
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (130))
                                                               (Prims.of_int (19))
                                                               (Prims.of_int (130))
                                                               (Prims.of_int (71))))))
                                           with
                                           | FStar_Tactics_Result.Success
                                               (a2, ps'2) ->
                                               (match FStar_Tactics_Types.tracepoint
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'2
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (131))
                                                                 (Prims.of_int (10))
                                                                 (Prims.of_int (142))
                                                                 (Prims.of_int (15)))))
                                                with
                                                | true ->
                                                    FStar_Tactics_Result.Success
                                                      (((match ((FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                   eff_name),
                                                                 a2)
                                                         with
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_PURE,
                                                            (pre, uu___)::[])
                                                             ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  (FStar_Pervasives_Native.Some
                                                                    pre)
                                                                  FStar_Pervasives_Native.None)
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_Pure,
                                                            (pre, uu___)::
                                                            (post, uu___1)::[])
                                                             ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  (FStar_Pervasives_Native.Some
                                                                    pre)
                                                                  (FStar_Pervasives_Native.Some
                                                                    post))
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_Stack,
                                                            (pre, uu___)::
                                                            (post, uu___1)::[])
                                                             ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  (FStar_Pervasives_Native.Some
                                                                    pre)
                                                                  (FStar_Pervasives_Native.Some
                                                                    post))
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_ST,
                                                            (pre, uu___)::
                                                            (post, uu___1)::[])
                                                             ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  (FStar_Pervasives_Native.Some
                                                                    pre)
                                                                  (FStar_Pervasives_Native.Some
                                                                    post))
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_Unknown,
                                                            []) ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  FStar_Pervasives_Native.None
                                                                  FStar_Pervasives_Native.None)
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_Unknown,
                                                            (pre, uu___)::[])
                                                             ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  (FStar_Pervasives_Native.Some
                                                                    pre)
                                                                  FStar_Pervasives_Native.None)
                                                         | (FStar_InteractiveHelpers_ExploreTerm.E_Unknown,
                                                            (pre, uu___)::
                                                            (post, uu___1)::[])
                                                             ->
                                                             FStar_Pervasives_Native.Some
                                                               (mk_effect_info
                                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_name_to_type
                                                                    eff_name)
                                                                  a1
                                                                  (FStar_Pervasives_Native.Some
                                                                    pre)
                                                                  (FStar_Pervasives_Native.Some
                                                                    post))
                                                         | uu___ ->
                                                             FStar_Pervasives_Native.None)),
                                                        (FStar_Tactics_Types.decr_depth
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              ps'2
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (131))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (142))
                                                                    (Prims.of_int (15))))))))
                                           | FStar_Tactics_Result.Failed
                                               (e, ps'2) ->
                                               FStar_Tactics_Result.Failed
                                                 (e, ps'2)))))
                       | FStar_Tactics_Result.Failed (e, ps'1) ->
                           FStar_Tactics_Result.Failed (e, ps'1)))
             | FStar_Tactics_Result.Failed (e, ps') ->
                 FStar_Tactics_Result.Failed (e, ps'))
let (comp_to_effect_info :
  Prims.bool ->
    FStar_Reflection_Types.comp ->
      FStar_Tactics_Types.proofstate ->
        effect_info FStar_Pervasives_Native.option
          FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun c ->
      fun ps ->
        match FStar_Tactics_Types.tracepoint
                (FStar_Tactics_Types.set_proofstate_range
                   (FStar_Tactics_Types.incr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (148)) (Prims.of_int (23))
                               (Prims.of_int (148)) (Prims.of_int (37))))))
                   (FStar_Range.prims_to_fstar_range
                      (Prims.mk_range
                         "experimental/FStar.InteractiveHelpers.Effectful.fst"
                         (Prims.of_int (149)) (Prims.of_int (2))
                         (Prims.of_int (149)) (Prims.of_int (33)))))
        with
        | true ->
            (comp_view_to_effect_info dbg
               (FStar_Reflection_Builtins.inspect_comp c))
              (FStar_Tactics_Types.decr_depth
                 (FStar_Tactics_Types.set_proofstate_range
                    (FStar_Tactics_Types.incr_depth
                       (FStar_Tactics_Types.set_proofstate_range ps
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (148)) (Prims.of_int (23))
                                (Prims.of_int (148)) (Prims.of_int (37))))))
                    (FStar_Range.prims_to_fstar_range
                       (Prims.mk_range
                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                          (Prims.of_int (149)) (Prims.of_int (2))
                          (Prims.of_int (149)) (Prims.of_int (33))))))
let (compute_effect_info :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term ->
        FStar_Tactics_Types.proofstate ->
          effect_info FStar_Pervasives_Native.option
            FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun tm ->
        fun ps ->
          match (FStar_InteractiveHelpers_ExploreTerm.safe_tcc e tm)
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (154)) (Prims.of_int (8))
                              (Prims.of_int (154)) (Prims.of_int (21))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (154)) (Prims.of_int (2))
                                (Prims.of_int (156)) (Prims.of_int (16)))))
               with
               | true ->
                   ((match a with
                     | FStar_Pervasives_Native.Some c ->
                         comp_to_effect_info dbg c
                     | FStar_Pervasives_Native.None ->
                         (fun s ->
                            FStar_Tactics_Result.Success
                              (FStar_Pervasives_Native.None, s))))
                     (FStar_Tactics_Types.decr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps'
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (154)) (Prims.of_int (2))
                                 (Prims.of_int (156)) (Prims.of_int (16)))))))
          | FStar_Tactics_Result.Failed (e1, ps') ->
              FStar_Tactics_Result.Failed (e1, ps')
let (typ_or_comp_to_effect_info :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      FStar_InteractiveHelpers_ExploreTerm.typ_or_comp ->
        FStar_Tactics_Types.proofstate ->
          effect_info FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge ->
      fun c ->
        fun ps ->
          match (FStar_InteractiveHelpers_ExploreTerm.flush_typ_or_comp dbg
                   ge.FStar_InteractiveHelpers_Base.env c)
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (171)) (Prims.of_int (10))
                              (Prims.of_int (171)) (Prims.of_int (40))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (172)) (Prims.of_int (2))
                                (Prims.of_int (180)) (Prims.of_int (25)))))
               with
               | true ->
                   ((match a with
                     | FStar_InteractiveHelpers_ExploreTerm.TC_Typ
                         (ty, uu___, uu___1) ->
                         (fun ps1 ->
                            match (FStar_InteractiveHelpers_ExploreTerm.get_type_info_from_type
                                     ty)
                                    (FStar_Tactics_Types.incr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (174))
                                                (Prims.of_int (16))
                                                (Prims.of_int (174))
                                                (Prims.of_int (42))))))
                            with
                            | FStar_Tactics_Result.Success (a1, ps'1) ->
                                (match FStar_Tactics_Types.tracepoint
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps'1
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (175))
                                                  (Prims.of_int (4))
                                                  (Prims.of_int (175))
                                                  (Prims.of_int (42)))))
                                 with
                                 | true ->
                                     FStar_Tactics_Result.Success
                                       ((mk_effect_info
                                           FStar_InteractiveHelpers_ExploreTerm.E_Total
                                           a1 FStar_Pervasives_Native.None
                                           FStar_Pervasives_Native.None),
                                         (FStar_Tactics_Types.decr_depth
                                            (FStar_Tactics_Types.set_proofstate_range
                                               ps'1
                                               (FStar_Range.prims_to_fstar_range
                                                  (Prims.mk_range
                                                     "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                     (Prims.of_int (175))
                                                     (Prims.of_int (4))
                                                     (Prims.of_int (175))
                                                     (Prims.of_int (42))))))))
                            | FStar_Tactics_Result.Failed (e, ps'1) ->
                                FStar_Tactics_Result.Failed (e, ps'1))
                     | FStar_InteractiveHelpers_ExploreTerm.TC_Comp
                         (cv, uu___, uu___1) ->
                         (fun ps1 ->
                            match (comp_to_effect_info dbg cv)
                                    (FStar_Tactics_Types.incr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (177))
                                                (Prims.of_int (20))
                                                (Prims.of_int (177))
                                                (Prims.of_int (46))))))
                            with
                            | FStar_Tactics_Result.Success (a1, ps'1) ->
                                (match FStar_Tactics_Types.tracepoint
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps'1
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (178))
                                                  (Prims.of_int (4))
                                                  (Prims.of_int (180))
                                                  (Prims.of_int (25)))))
                                 with
                                 | true ->
                                     ((match a1 with
                                       | FStar_Pervasives_Native.None ->
                                           FStar_InteractiveHelpers_Base.mfail
                                             (Prims.strcat
                                                "typ_or_comp_to_effect_info failed on: "
                                                (FStar_InteractiveHelpers_Base.acomp_to_string
                                                   cv))
                                       | FStar_Pervasives_Native.Some einfo
                                           ->
                                           (fun s ->
                                              FStar_Tactics_Result.Success
                                                (einfo, s))))
                                       (FStar_Tactics_Types.decr_depth
                                          (FStar_Tactics_Types.set_proofstate_range
                                             ps'1
                                             (FStar_Range.prims_to_fstar_range
                                                (Prims.mk_range
                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                   (Prims.of_int (178))
                                                   (Prims.of_int (4))
                                                   (Prims.of_int (180))
                                                   (Prims.of_int (25)))))))
                            | FStar_Tactics_Result.Failed (e, ps'1) ->
                                FStar_Tactics_Result.Failed (e, ps'1))))
                     (FStar_Tactics_Types.decr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps'
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (172)) (Prims.of_int (2))
                                 (Prims.of_int (180)) (Prims.of_int (25)))))))
          | FStar_Tactics_Result.Failed (e, ps') ->
              FStar_Tactics_Result.Failed (e, ps')
let (tcc_no_lift :
  FStar_Reflection_Types.env ->
    FStar_Reflection_Types.term ->
      FStar_Tactics_Types.proofstate ->
        FStar_Reflection_Types.comp FStar_Tactics_Result.__result)
  =
  fun e ->
    fun t ->
      fun ps ->
        match (FStar_Tactics_Builtins.inspect t)
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (193)) (Prims.of_int (8))
                            (Prims.of_int (193)) (Prims.of_int (17))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (193)) (Prims.of_int (2))
                              (Prims.of_int (200)) (Prims.of_int (11)))))
             with
             | true ->
                 ((match a with
                   | FStar_Reflection_Data.Tv_App (uu___, uu___1) ->
                       (fun ps1 ->
                          match FStar_Tactics_Types.tracepoint
                                  (FStar_Tactics_Types.set_proofstate_range
                                     (FStar_Tactics_Types.incr_depth
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps1
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range
                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                 (Prims.of_int (195))
                                                 (Prims.of_int (19))
                                                 (Prims.of_int (195))
                                                 (Prims.of_int (32))))))
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (195))
                                           (Prims.of_int (4))
                                           (Prims.of_int (197))
                                           (Prims.of_int (41)))))
                          with
                          | true ->
                              ((match FStar_Reflection_Derived.collect_app t
                                with
                                | (hd, args) ->
                                    (fun ps2 ->
                                       match (FStar_Tactics_Builtins.tcc e hd)
                                               (FStar_Tactics_Types.incr_depth
                                                  (FStar_Tactics_Types.set_proofstate_range
                                                     ps2
                                                     (FStar_Range.prims_to_fstar_range
                                                        (Prims.mk_range
                                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                           (Prims.of_int (196))
                                                           (Prims.of_int (12))
                                                           (Prims.of_int (196))
                                                           (Prims.of_int (20))))))
                                       with
                                       | FStar_Tactics_Result.Success
                                           (a1, ps'1) ->
                                           (match FStar_Tactics_Types.tracepoint
                                                    (FStar_Tactics_Types.set_proofstate_range
                                                       ps'1
                                                       (FStar_Range.prims_to_fstar_range
                                                          (Prims.mk_range
                                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                             (Prims.of_int (197))
                                                             (Prims.of_int (4))
                                                             (Prims.of_int (197))
                                                             (Prims.of_int (41)))))
                                            with
                                            | true ->
                                                (FStar_InteractiveHelpers_ExploreTerm.inst_comp
                                                   e a1
                                                   (FStar_List_Tot_Base.map
                                                      FStar_Pervasives_Native.fst
                                                      args))
                                                  (FStar_Tactics_Types.decr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'1
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (197))
                                                              (Prims.of_int (4))
                                                              (Prims.of_int (197))
                                                              (Prims.of_int (41)))))))
                                       | FStar_Tactics_Result.Failed
                                           (e1, ps'1) ->
                                           FStar_Tactics_Result.Failed
                                             (e1, ps'1))))
                                (FStar_Tactics_Types.decr_depth
                                   (FStar_Tactics_Types.set_proofstate_range
                                      (FStar_Tactics_Types.incr_depth
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps1
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (195))
                                                  (Prims.of_int (19))
                                                  (Prims.of_int (195))
                                                  (Prims.of_int (32))))))
                                      (FStar_Range.prims_to_fstar_range
                                         (Prims.mk_range
                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                            (Prims.of_int (195))
                                            (Prims.of_int (4))
                                            (Prims.of_int (197))
                                            (Prims.of_int (41)))))))
                   | uu___ -> FStar_Tactics_Builtins.tcc e t))
                   (FStar_Tactics_Types.decr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps'
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (193)) (Prims.of_int (2))
                               (Prims.of_int (200)) (Prims.of_int (11)))))))
        | FStar_Tactics_Result.Failed (e1, ps') ->
            FStar_Tactics_Result.Failed (e1, ps')
let (compute_eterm_info :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term ->
        FStar_Tactics_Types.proofstate ->
          eterm_info FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun t ->
        fun ps ->
          match (decompose_application e t)
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (208)) (Prims.of_int (23))
                              (Prims.of_int (208)) (Prims.of_int (48))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (208)) (Prims.of_int (2))
                                (Prims.of_int (221)) (Prims.of_int (16)))))
               with
               | true ->
                   ((match a with
                     | (hd, parameters) ->
                         FStar_Tactics_Derived.try_with
                           (fun uu___ ->
                              match () with
                              | () ->
                                  (fun ps1 ->
                                     match (tcc_no_lift e t)
                                             (FStar_Tactics_Types.incr_depth
                                                (FStar_Tactics_Types.set_proofstate_range
                                                   ps1
                                                   (FStar_Range.prims_to_fstar_range
                                                      (Prims.mk_range
                                                         "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                         (Prims.of_int (211))
                                                         (Prims.of_int (19))
                                                         (Prims.of_int (211))
                                                         (Prims.of_int (34))))))
                                     with
                                     | FStar_Tactics_Result.Success
                                         (a1, ps'1) ->
                                         (match FStar_Tactics_Types.tracepoint
                                                  (FStar_Tactics_Types.set_proofstate_range
                                                     ps'1
                                                     (FStar_Range.prims_to_fstar_range
                                                        (Prims.mk_range
                                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                           (Prims.of_int (212))
                                                           (Prims.of_int (4))
                                                           (Prims.of_int (216))
                                                           (Prims.of_int (39)))))
                                          with
                                          | true ->
                                              (match (comp_to_effect_info dbg
                                                        a1)
                                                       (FStar_Tactics_Types.incr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             (FStar_Tactics_Types.decr_depth
                                                                (FStar_Tactics_Types.set_proofstate_range
                                                                   ps'1
                                                                   (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (212))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (216))
                                                                    (Prims.of_int (39))))))
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (212))
                                                                   (Prims.of_int (20))
                                                                   (Prims.of_int (212))
                                                                   (Prims.of_int (45))))))
                                               with
                                               | FStar_Tactics_Result.Success
                                                   (a2, ps'2) ->
                                                   (match FStar_Tactics_Types.tracepoint
                                                            (FStar_Tactics_Types.set_proofstate_range
                                                               ps'2
                                                               (FStar_Range.prims_to_fstar_range
                                                                  (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (213))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (216))
                                                                    (Prims.of_int (39)))))
                                                    with
                                                    | true ->
                                                        ((match a2 with
                                                          | FStar_Pervasives_Native.None
                                                              ->
                                                              FStar_InteractiveHelpers_Base.mfail
                                                                (Prims.strcat
                                                                   "compute_eterm_info: failed on: "
                                                                   (FStar_Reflection_Builtins.term_to_string
                                                                    t))
                                                          | FStar_Pervasives_Native.Some
                                                              einfo ->
                                                              (fun s ->
                                                                 FStar_Tactics_Result.Success
                                                                   ((mk_eterm_info
                                                                    einfo hd
                                                                    parameters),
                                                                    s))))
                                                          (FStar_Tactics_Types.decr_depth
                                                             (FStar_Tactics_Types.set_proofstate_range
                                                                ps'2
                                                                (FStar_Range.prims_to_fstar_range
                                                                   (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (213))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (216))
                                                                    (Prims.of_int (39)))))))
                                               | FStar_Tactics_Result.Failed
                                                   (e1, ps'2) ->
                                                   FStar_Tactics_Result.Failed
                                                     (e1, ps'2)))
                                     | FStar_Tactics_Result.Failed (e1, ps'1)
                                         ->
                                         FStar_Tactics_Result.Failed
                                           (e1, ps'1)))
                           (fun uu___ ->
                              match uu___ with
                              | FStar_Tactics_Common.TacticFailure msg ->
                                  FStar_InteractiveHelpers_Base.mfail
                                    (Prims.strcat
                                       "compute_eterm_info: failure: '"
                                       (Prims.strcat msg "'"))
                              | e1 -> FStar_Tactics_Effect.raise e1)))
                     (FStar_Tactics_Types.decr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps'
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (208)) (Prims.of_int (2))
                                 (Prims.of_int (221)) (Prims.of_int (16)))))))
          | FStar_Tactics_Result.Failed (e1, ps') ->
              FStar_Tactics_Result.Failed (e1, ps')
let (has_refinement :
  FStar_InteractiveHelpers_ExploreTerm.type_info -> Prims.bool) =
  fun ty ->
    FStar_Pervasives_Native.uu___is_Some
      ty.FStar_InteractiveHelpers_ExploreTerm.refin
let (get_refinement :
  FStar_InteractiveHelpers_ExploreTerm.type_info ->
    FStar_Reflection_Types.term)
  =
  fun ty ->
    FStar_Pervasives_Native.__proj__Some__item__v
      ty.FStar_InteractiveHelpers_ExploreTerm.refin
let (get_opt_refinment :
  FStar_InteractiveHelpers_ExploreTerm.type_info ->
    FStar_Reflection_Types.term FStar_Pervasives_Native.option)
  = fun ty -> ty.FStar_InteractiveHelpers_ExploreTerm.refin
let (get_rawest_type :
  FStar_InteractiveHelpers_ExploreTerm.type_info ->
    FStar_Reflection_Types.typ)
  = fun ty -> ty.FStar_InteractiveHelpers_ExploreTerm.ty
type type_comparison =
  | Refines 
  | Same_raw_type 
  | Unknown 
let (uu___is_Refines : type_comparison -> Prims.bool) =
  fun projectee -> match projectee with | Refines -> true | uu___ -> false
let (uu___is_Same_raw_type : type_comparison -> Prims.bool) =
  fun projectee ->
    match projectee with | Same_raw_type -> true | uu___ -> false
let (uu___is_Unknown : type_comparison -> Prims.bool) =
  fun projectee -> match projectee with | Unknown -> true | uu___ -> false
let (type_comparison_to_string : type_comparison -> Prims.string) =
  fun c ->
    match c with
    | Refines -> "Refines"
    | Same_raw_type -> "Same_raw_type"
    | Unknown -> "Unknown"
let (compare_types :
  Prims.bool ->
    FStar_InteractiveHelpers_ExploreTerm.type_info ->
      FStar_InteractiveHelpers_ExploreTerm.type_info ->
        FStar_Tactics_Types.proofstate ->
          type_comparison FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun info1 ->
      fun info2 ->
        fun ps ->
          match (FStar_InteractiveHelpers_Base.print_dbg dbg
                   "[> compare_types")
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (253)) (Prims.of_int (2))
                              (Prims.of_int (253)) (Prims.of_int (34))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (254)) (Prims.of_int (2))
                                (Prims.of_int (277)) (Prims.of_int (13)))))
               with
               | true ->
                   (if
                      FStar_Reflection_Builtins.term_eq
                        info1.FStar_InteractiveHelpers_ExploreTerm.ty
                        info2.FStar_InteractiveHelpers_ExploreTerm.ty
                    then
                      (fun ps1 ->
                         match (FStar_InteractiveHelpers_Base.print_dbg dbg
                                  "-> types are equal")
                                 (FStar_Tactics_Types.incr_depth
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps1
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (255))
                                             (Prims.of_int (14))
                                             (Prims.of_int (255))
                                             (Prims.of_int (48))))))
                         with
                         | FStar_Tactics_Result.Success (a1, ps'1) ->
                             (match FStar_Tactics_Types.tracepoint
                                      (FStar_Tactics_Types.set_proofstate_range
                                         ps'1
                                         (FStar_Range.prims_to_fstar_range
                                            (Prims.mk_range
                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                               (Prims.of_int (256))
                                               (Prims.of_int (6))
                                               (Prims.of_int (274))
                                               (Prims.of_int (15)))))
                              with
                              | true ->
                                  (if has_refinement info2
                                   then
                                     (fun ps2 ->
                                        match (FStar_InteractiveHelpers_Base.print_dbg
                                                 dbg
                                                 "-> 2nd type has refinement")
                                                (FStar_Tactics_Types.incr_depth
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (257))
                                                            (Prims.of_int (16))
                                                            (Prims.of_int (257))
                                                            (Prims.of_int (58))))))
                                        with
                                        | FStar_Tactics_Result.Success
                                            (a2, ps'2) ->
                                            (match FStar_Tactics_Types.tracepoint
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'2
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (260))
                                                              (Prims.of_int (8))
                                                              (Prims.of_int (271))
                                                              (Prims.of_int (23)))))
                                             with
                                             | true ->
                                                 (if has_refinement info1
                                                  then
                                                    (fun ps3 ->
                                                       match (FStar_InteractiveHelpers_Base.print_dbg
                                                                dbg
                                                                "-> 1st type has refinement")
                                                               (FStar_Tactics_Types.incr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (261))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (261))
                                                                    (Prims.of_int (60))))))
                                                       with
                                                       | FStar_Tactics_Result.Success
                                                           (a3, ps'3) ->
                                                           (match FStar_Tactics_Types.tracepoint
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (262))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (267))
                                                                    (Prims.of_int (23)))))
                                                            with
                                                            | true ->
                                                                (if
                                                                   FStar_Reflection_Builtins.term_eq
                                                                    (get_refinement
                                                                    info1)
                                                                    (get_refinement
                                                                    info2)
                                                                 then
                                                                   (fun ps4
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "-> Refines")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (263))
                                                                    (Prims.of_int (20))
                                                                    (Prims.of_int (263))
                                                                    (Prims.of_int (46))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (264))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (264))
                                                                    (Prims.of_int (19)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (Refines,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (264))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (264))
                                                                    (Prims.of_int (19))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))
                                                                 else
                                                                   (fun ps4
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "-> Same_raw_type")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (266))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (266))
                                                                    (Prims.of_int (50))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (267))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (267))
                                                                    (Prims.of_int (23)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (Same_raw_type,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (267))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (267))
                                                                    (Prims.of_int (23))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))
                                                                  (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (262))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (267))
                                                                    (Prims.of_int (23)))))))
                                                       | FStar_Tactics_Result.Failed
                                                           (e, ps'3) ->
                                                           FStar_Tactics_Result.Failed
                                                             (e, ps'3))
                                                  else
                                                    (fun ps3 ->
                                                       match (FStar_InteractiveHelpers_Base.print_dbg
                                                                dbg
                                                                "-> 1st type has no refinement")
                                                               (FStar_Tactics_Types.incr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (269))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (269))
                                                                    (Prims.of_int (63))))))
                                                       with
                                                       | FStar_Tactics_Result.Success
                                                           (a3, ps'3) ->
                                                           (match FStar_Tactics_Types.tracepoint
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (270))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (271))
                                                                    (Prims.of_int (23)))))
                                                            with
                                                            | true ->
                                                                (match 
                                                                   (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "-> Same_raw_type")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (270))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (271))
                                                                    (Prims.of_int (23))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (270))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (270))
                                                                    (Prims.of_int (50))))))
                                                                 with
                                                                 | FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (271))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (271))
                                                                    (Prims.of_int (23)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (Same_raw_type,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (271))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (271))
                                                                    (Prims.of_int (23))))))))
                                                                 | FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))
                                                       | FStar_Tactics_Result.Failed
                                                           (e, ps'3) ->
                                                           FStar_Tactics_Result.Failed
                                                             (e, ps'3)))
                                                   (FStar_Tactics_Types.decr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps'2
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (260))
                                                               (Prims.of_int (8))
                                                               (Prims.of_int (271))
                                                               (Prims.of_int (23)))))))
                                        | FStar_Tactics_Result.Failed
                                            (e, ps'2) ->
                                            FStar_Tactics_Result.Failed
                                              (e, ps'2))
                                   else
                                     (fun ps2 ->
                                        match (FStar_InteractiveHelpers_Base.print_dbg
                                                 dbg
                                                 "-> 2nd type has no refinement: Refines")
                                                (FStar_Tactics_Types.incr_depth
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (273))
                                                            (Prims.of_int (16))
                                                            (Prims.of_int (273))
                                                            (Prims.of_int (70))))))
                                        with
                                        | FStar_Tactics_Result.Success
                                            (a2, ps'2) ->
                                            (match FStar_Tactics_Types.tracepoint
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'2
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (274))
                                                              (Prims.of_int (8))
                                                              (Prims.of_int (274))
                                                              (Prims.of_int (15)))))
                                             with
                                             | true ->
                                                 FStar_Tactics_Result.Success
                                                   (Refines,
                                                     (FStar_Tactics_Types.decr_depth
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'2
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (274))
                                                                 (Prims.of_int (8))
                                                                 (Prims.of_int (274))
                                                                 (Prims.of_int (15))))))))
                                        | FStar_Tactics_Result.Failed
                                            (e, ps'2) ->
                                            FStar_Tactics_Result.Failed
                                              (e, ps'2)))
                                    (FStar_Tactics_Types.decr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (256))
                                                (Prims.of_int (6))
                                                (Prims.of_int (274))
                                                (Prims.of_int (15)))))))
                         | FStar_Tactics_Result.Failed (e, ps'1) ->
                             FStar_Tactics_Result.Failed (e, ps'1))
                    else
                      (fun ps1 ->
                         match (FStar_InteractiveHelpers_Base.print_dbg dbg
                                  "types are not equal")
                                 (FStar_Tactics_Types.incr_depth
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps1
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (276))
                                             (Prims.of_int (14))
                                             (Prims.of_int (276))
                                             (Prims.of_int (49))))))
                         with
                         | FStar_Tactics_Result.Success (a1, ps'1) ->
                             (match FStar_Tactics_Types.tracepoint
                                      (FStar_Tactics_Types.set_proofstate_range
                                         ps'1
                                         (FStar_Range.prims_to_fstar_range
                                            (Prims.mk_range
                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                               (Prims.of_int (277))
                                               (Prims.of_int (6))
                                               (Prims.of_int (277))
                                               (Prims.of_int (13)))))
                              with
                              | true ->
                                  FStar_Tactics_Result.Success
                                    (Unknown,
                                      (FStar_Tactics_Types.decr_depth
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps'1
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (277))
                                                  (Prims.of_int (6))
                                                  (Prims.of_int (277))
                                                  (Prims.of_int (13))))))))
                         | FStar_Tactics_Result.Failed (e, ps'1) ->
                             FStar_Tactics_Result.Failed (e, ps'1)))
                     (FStar_Tactics_Types.decr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps'
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (254)) (Prims.of_int (2))
                                 (Prims.of_int (277)) (Prims.of_int (13)))))))
          | FStar_Tactics_Result.Failed (e, ps') ->
              FStar_Tactics_Result.Failed (e, ps')
let (compare_cast_types :
  Prims.bool ->
    cast_info ->
      FStar_Tactics_Types.proofstate ->
        type_comparison FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun p ->
      fun ps ->
        match (FStar_InteractiveHelpers_Base.print_dbg dbg
                 "[> compare_cast_types")
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (283)) (Prims.of_int (2))
                            (Prims.of_int (283)) (Prims.of_int (39))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (284)) (Prims.of_int (2))
                              (Prims.of_int (287)) (Prims.of_int (16)))))
             with
             | true ->
                 ((match ((p.p_ty), (p.exp_ty)) with
                   | (FStar_Pervasives_Native.Some info1,
                      FStar_Pervasives_Native.Some info2) ->
                       compare_types dbg info1 info2
                   | uu___ ->
                       (fun s -> FStar_Tactics_Result.Success (Unknown, s))))
                   (FStar_Tactics_Types.decr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps'
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (284)) (Prims.of_int (2))
                               (Prims.of_int (287)) (Prims.of_int (16)))))))
        | FStar_Tactics_Result.Failed (e, ps') ->
            FStar_Tactics_Result.Failed (e, ps')
let (mk_has_type :
  FStar_Reflection_Types.term ->
    FStar_Reflection_Types.typ ->
      FStar_Tactics_Types.proofstate ->
        FStar_Reflection_Types.term FStar_Tactics_Result.__result)
  =
  fun t ->
    fun ty ->
      fun s ->
        FStar_Tactics_Result.Success
          ((FStar_Reflection_Derived.mk_app
              (FStar_Reflection_Builtins.pack_ln
                 (FStar_Reflection_Data.Tv_FVar
                    (FStar_Reflection_Builtins.pack_fv ["Prims"; "has_type"])))
              [(ty, FStar_Reflection_Data.Q_Implicit);
              (t, FStar_Reflection_Data.Q_Explicit);
              (ty, FStar_Reflection_Data.Q_Explicit)]), s)
let (cast_info_to_propositions :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      cast_info ->
        FStar_Tactics_Types.proofstate ->
          FStar_InteractiveHelpers_Propositions.proposition Prims.list
            FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge ->
      fun ci ->
        fun ps ->
          match (FStar_InteractiveHelpers_Base.print_dbg dbg
                   (Prims.strcat "[> cast_info_to_propositions:\n"
                      (cast_info_to_string ci)))
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (314)) (Prims.of_int (2))
                              (Prims.of_int (314)) (Prims.of_int (76))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (315)) (Prims.of_int (2))
                                (Prims.of_int (342)) (Prims.of_int (13)))))
               with
               | true ->
                   (match (compare_cast_types dbg ci)
                            (FStar_Tactics_Types.incr_depth
                               (FStar_Tactics_Types.set_proofstate_range
                                  (FStar_Tactics_Types.decr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps'
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (315))
                                              (Prims.of_int (2))
                                              (Prims.of_int (342))
                                              (Prims.of_int (13))))))
                                  (FStar_Range.prims_to_fstar_range
                                     (Prims.mk_range
                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                        (Prims.of_int (315))
                                        (Prims.of_int (8))
                                        (Prims.of_int (315))
                                        (Prims.of_int (33))))))
                    with
                    | FStar_Tactics_Result.Success (a1, ps'1) ->
                        (match FStar_Tactics_Types.tracepoint
                                 (FStar_Tactics_Types.set_proofstate_range
                                    ps'1
                                    (FStar_Range.prims_to_fstar_range
                                       (Prims.mk_range
                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                          (Prims.of_int (315))
                                          (Prims.of_int (2))
                                          (Prims.of_int (342))
                                          (Prims.of_int (13)))))
                         with
                         | true ->
                             ((match a1 with
                               | Refines ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg
                                               "-> Comparison result: Refines")
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (317))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (317))
                                                          (Prims.of_int (51))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (318))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (318))
                                                            (Prims.of_int (6)))))
                                           with
                                           | true ->
                                               FStar_Tactics_Result.Success
                                                 ([],
                                                   (FStar_Tactics_Types.decr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps'2
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (318))
                                                               (Prims.of_int (4))
                                                               (Prims.of_int (318))
                                                               (Prims.of_int (6))))))))
                                      | FStar_Tactics_Result.Failed (e, ps'2)
                                          ->
                                          FStar_Tactics_Result.Failed
                                            (e, ps'2))
                               | Same_raw_type ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg
                                               "-> Comparison result: Same_raw_type")
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (320))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (320))
                                                          (Prims.of_int (57))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (321))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (323))
                                                            (Prims.of_int (16)))))
                                           with
                                           | true ->
                                               (match FStar_Tactics_Types.tracepoint
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           (FStar_Tactics_Types.incr_depth
                                                              (FStar_Tactics_Types.set_proofstate_range
                                                                 (FStar_Tactics_Types.decr_depth
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (321))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (16))))))
                                                                 (FStar_Range.prims_to_fstar_range
                                                                    (
                                                                    Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (321))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (321))
                                                                    (Prims.of_int (50))))))
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (322))
                                                                 (Prims.of_int (4))
                                                                 (Prims.of_int (323))
                                                                 (Prims.of_int (16)))))
                                                with
                                                | true ->
                                                    (match (FStar_InteractiveHelpers_Base.mk_app_norm
                                                              ge.FStar_InteractiveHelpers_Base.env
                                                              (get_refinement
                                                                 (FStar_Pervasives_Native.__proj__Some__item__v
                                                                    ci.exp_ty))
                                                              [ci.term])
                                                             (FStar_Tactics_Types.incr_depth
                                                                (FStar_Tactics_Types.set_proofstate_range
                                                                   (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (321))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (16))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (321))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (321))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (322))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (16))))))
                                                                   (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (322))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (322))
                                                                    (Prims.of_int (55))))))
                                                     with
                                                     | FStar_Tactics_Result.Success
                                                         (a3, ps'3) ->
                                                         (match FStar_Tactics_Types.tracepoint
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (16)))))
                                                          with
                                                          | true ->
                                                              FStar_Tactics_Result.Success
                                                                ([a3],
                                                                  (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (323))
                                                                    (Prims.of_int (16))))))))
                                                     | FStar_Tactics_Result.Failed
                                                         (e, ps'3) ->
                                                         FStar_Tactics_Result.Failed
                                                           (e, ps'3))))
                                      | FStar_Tactics_Result.Failed (e, ps'2)
                                          ->
                                          FStar_Tactics_Result.Failed
                                            (e, ps'2))
                               | Unknown ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg
                                               "-> Comparison result: Unknown")
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (325))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (325))
                                                          (Prims.of_int (51))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (326))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (342))
                                                            (Prims.of_int (13)))))
                                           with
                                           | true ->
                                               ((match ((ci.p_ty),
                                                         (ci.exp_ty))
                                                 with
                                                 | (FStar_Pervasives_Native.Some
                                                    p_ty,
                                                    FStar_Pervasives_Native.Some
                                                    e_ty) ->
                                                     (fun ps2 ->
                                                        match FStar_Tactics_Types.tracepoint
                                                                (FStar_Tactics_Types.set_proofstate_range
                                                                   (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (328))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (328))
                                                                    (Prims.of_int (38))))))
                                                                   (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41)))))
                                                        with
                                                        | true ->
                                                            (match FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (328))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (328))
                                                                    (Prims.of_int (38))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (38))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (336))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41)))))
                                                             with
                                                             | true ->
                                                                 (match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_AscribedT
                                                                    ((ci.term),
                                                                    (get_rawest_type
                                                                    p_ty),
                                                                    FStar_Pervasives_Native.None)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (328))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (328))
                                                                    (Prims.of_int (38))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (329))
                                                                    (Prims.of_int (38))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (336))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (336))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (336))
                                                                    (Prims.of_int (60))))))
                                                                  with
                                                                  | FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (28))
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (95))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (28))
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (95))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (56))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (340))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.opt_mk_app_norm
                                                                    ge.FStar_InteractiveHelpers_Base.env
                                                                    e_ty.FStar_InteractiveHelpers_ExploreTerm.refin
                                                                    [ci.term])
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (28))
                                                                    (Prims.of_int (337))
                                                                    (Prims.of_int (95))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (338))
                                                                    (Prims.of_int (56))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (340))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (340))
                                                                    (Prims.of_int (27))
                                                                    (Prims.of_int (340))
                                                                    (Prims.of_int (70))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_InteractiveHelpers_Base.opt_cons
                                                                    a4
                                                                    [
                                                                    FStar_Reflection_Derived.mk_app
                                                                    (FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_FVar
                                                                    (FStar_Reflection_Builtins.pack_fv
                                                                    ["Prims";
                                                                    "has_type"])))
                                                                    [
                                                                    ((get_rawest_type
                                                                    p_ty),
                                                                    FStar_Reflection_Data.Q_Implicit);
                                                                    (a3,
                                                                    FStar_Reflection_Data.Q_Explicit);
                                                                    ((get_rawest_type
                                                                    e_ty),
                                                                    FStar_Reflection_Data.Q_Explicit)]]),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (341))
                                                                    (Prims.of_int (41))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))))
                                                                  | FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))))
                                                 | uu___ ->
                                                     (fun s ->
                                                        FStar_Tactics_Result.Success
                                                          ([], s))))
                                                 (FStar_Tactics_Types.decr_depth
                                                    (FStar_Tactics_Types.set_proofstate_range
                                                       ps'2
                                                       (FStar_Range.prims_to_fstar_range
                                                          (Prims.mk_range
                                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                             (Prims.of_int (326))
                                                             (Prims.of_int (4))
                                                             (Prims.of_int (342))
                                                             (Prims.of_int (13)))))))
                                      | FStar_Tactics_Result.Failed (e, ps'2)
                                          ->
                                          FStar_Tactics_Result.Failed
                                            (e, ps'2))))
                               (FStar_Tactics_Types.decr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     ps'1
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (315))
                                           (Prims.of_int (2))
                                           (Prims.of_int (342))
                                           (Prims.of_int (13)))))))
                    | FStar_Tactics_Result.Failed (e, ps'1) ->
                        FStar_Tactics_Result.Failed (e, ps'1)))
          | FStar_Tactics_Result.Failed (e, ps') ->
              FStar_Tactics_Result.Failed (e, ps')
let (cast_info_list_to_propositions :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      cast_info Prims.list ->
        FStar_Tactics_Types.proofstate ->
          FStar_InteractiveHelpers_Propositions.proposition Prims.list
            FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge ->
      fun ls ->
        fun ps ->
          match (FStar_Tactics_Util.map (cast_info_to_propositions dbg ge) ls)
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (349)) (Prims.of_int (12))
                              (Prims.of_int (349)) (Prims.of_int (53))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (350)) (Prims.of_int (2))
                                (Prims.of_int (350)) (Prims.of_int (13)))))
               with
               | true ->
                   FStar_Tactics_Result.Success
                     ((FStar_List_Tot_Base.flatten a),
                       (FStar_Tactics_Types.decr_depth
                          (FStar_Tactics_Types.set_proofstate_range ps'
                             (FStar_Range.prims_to_fstar_range
                                (Prims.mk_range
                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                   (Prims.of_int (350)) (Prims.of_int (2))
                                   (Prims.of_int (350)) (Prims.of_int (13))))))))
          | FStar_Tactics_Result.Failed (e, ps') ->
              FStar_Tactics_Result.Failed (e, ps')
type pre_post_type =
  | PP_Unknown 
  | PP_Pure 
  | PP_State of FStar_Reflection_Types.term 
let (uu___is_PP_Unknown : pre_post_type -> Prims.bool) =
  fun projectee -> match projectee with | PP_Unknown -> true | uu___ -> false
let (uu___is_PP_Pure : pre_post_type -> Prims.bool) =
  fun projectee -> match projectee with | PP_Pure -> true | uu___ -> false
let (uu___is_PP_State : pre_post_type -> Prims.bool) =
  fun projectee ->
    match projectee with | PP_State state_type -> true | uu___ -> false
let (__proj__PP_State__item__state_type :
  pre_post_type -> FStar_Reflection_Types.term) =
  fun projectee -> match projectee with | PP_State state_type -> state_type
let (compute_pre_type :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term ->
        FStar_Tactics_Types.proofstate ->
          pre_post_type FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun pre ->
        fun ps ->
          match (FStar_InteractiveHelpers_Base.print_dbg dbg
                   "[> compute_pre_type")
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (368)) (Prims.of_int (2))
                              (Prims.of_int (368)) (Prims.of_int (37))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (369)) (Prims.of_int (2))
                                (Prims.of_int (386)) (Prims.of_int (16)))))
               with
               | true ->
                   (match (FStar_InteractiveHelpers_ExploreTerm.safe_tc e pre)
                            (FStar_Tactics_Types.incr_depth
                               (FStar_Tactics_Types.set_proofstate_range
                                  (FStar_Tactics_Types.decr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps'
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (369))
                                              (Prims.of_int (2))
                                              (Prims.of_int (386))
                                              (Prims.of_int (16))))))
                                  (FStar_Range.prims_to_fstar_range
                                     (Prims.mk_range
                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                        (Prims.of_int (369))
                                        (Prims.of_int (8))
                                        (Prims.of_int (369))
                                        (Prims.of_int (21))))))
                    with
                    | FStar_Tactics_Result.Success (a1, ps'1) ->
                        (match FStar_Tactics_Types.tracepoint
                                 (FStar_Tactics_Types.set_proofstate_range
                                    ps'1
                                    (FStar_Range.prims_to_fstar_range
                                       (Prims.mk_range
                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                          (Prims.of_int (369))
                                          (Prims.of_int (2))
                                          (Prims.of_int (386))
                                          (Prims.of_int (16)))))
                         with
                         | true ->
                             ((match a1 with
                               | FStar_Pervasives_Native.None ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg "safe_tc failed")
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (371))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (371))
                                                          (Prims.of_int (34))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (372))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (372))
                                                            (Prims.of_int (14)))))
                                           with
                                           | true ->
                                               FStar_Tactics_Result.Success
                                                 (PP_Unknown,
                                                   (FStar_Tactics_Types.decr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps'2
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (372))
                                                               (Prims.of_int (4))
                                                               (Prims.of_int (372))
                                                               (Prims.of_int (14))))))))
                                      | FStar_Tactics_Result.Failed
                                          (e1, ps'2) ->
                                          FStar_Tactics_Result.Failed
                                            (e1, ps'2))
                               | FStar_Pervasives_Native.Some ty ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg "safe_tc succeeded")
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (374))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (374))
                                                          (Prims.of_int (37))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (375))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (386))
                                                            (Prims.of_int (16)))))
                                           with
                                           | true ->
                                               (match (FStar_Tactics_SyntaxHelpers.collect_arr_bs
                                                         ty)
                                                        (FStar_Tactics_Types.incr_depth
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              (FStar_Tactics_Types.decr_depth
                                                                 (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (
                                                                    FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (375))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16))))))
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (375))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (375))
                                                                    (Prims.of_int (34))))))
                                                with
                                                | FStar_Tactics_Result.Success
                                                    (a3, ps'3) ->
                                                    (match FStar_Tactics_Types.tracepoint
                                                             (FStar_Tactics_Types.set_proofstate_range
                                                                ps'3
                                                                (FStar_Range.prims_to_fstar_range
                                                                   (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (375))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16)))))
                                                     with
                                                     | true ->
                                                         ((match a3 with
                                                           | (brs, c) ->
                                                               (fun ps2 ->
                                                                  match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "num binders: "
                                                                    (Prims.string_of_int
                                                                    (FStar_List_Tot_Base.length
                                                                    brs))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (376))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (376))
                                                                    (Prims.of_int (73))))))
                                                                  with
                                                                  | FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (377))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match 
                                                                    (brs,
                                                                    (FStar_InteractiveHelpers_ExploreTerm.is_total_or_gtotal
                                                                    c))
                                                                    with
                                                                    | ([],
                                                                    true) ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Pure")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (379))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (379))
                                                                    (Prims.of_int (29))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (380))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (380))
                                                                    (Prims.of_int (13)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (PP_Pure,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (380))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (380))
                                                                    (Prims.of_int (13))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))
                                                                    | (b::[],
                                                                    true) ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "PP_State "
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    b))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (382))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (382))
                                                                    (Prims.of_int (71))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (383))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (383))
                                                                    (Prims.of_int (33)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((PP_State
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    b)),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (383))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (383))
                                                                    (Prims.of_int (33))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))
                                                                    | uu___
                                                                    ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Unknown")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (385))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (385))
                                                                    (Prims.of_int (32))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (PP_Unknown,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (377))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16)))))))
                                                                  | FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4))))
                                                           (FStar_Tactics_Types.decr_depth
                                                              (FStar_Tactics_Types.set_proofstate_range
                                                                 ps'3
                                                                 (FStar_Range.prims_to_fstar_range
                                                                    (
                                                                    Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (375))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (386))
                                                                    (Prims.of_int (16)))))))
                                                | FStar_Tactics_Result.Failed
                                                    (e1, ps'3) ->
                                                    FStar_Tactics_Result.Failed
                                                      (e1, ps'3)))
                                      | FStar_Tactics_Result.Failed
                                          (e1, ps'2) ->
                                          FStar_Tactics_Result.Failed
                                            (e1, ps'2))))
                               (FStar_Tactics_Types.decr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     ps'1
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (369))
                                           (Prims.of_int (2))
                                           (Prims.of_int (386))
                                           (Prims.of_int (16)))))))
                    | FStar_Tactics_Result.Failed (e1, ps'1) ->
                        FStar_Tactics_Result.Failed (e1, ps'1)))
          | FStar_Tactics_Result.Failed (e1, ps') ->
              FStar_Tactics_Result.Failed (e1, ps')
let (opt_remove_refin :
  FStar_Reflection_Types.typ ->
    FStar_Tactics_Types.proofstate ->
      FStar_Reflection_Types.typ FStar_Tactics_Result.__result)
  =
  fun ty ->
    fun ps ->
      match (FStar_Tactics_Builtins.inspect ty)
              (FStar_Tactics_Types.incr_depth
                 (FStar_Tactics_Types.set_proofstate_range ps
                    (FStar_Range.prims_to_fstar_range
                       (Prims.mk_range
                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                          (Prims.of_int (390)) (Prims.of_int (8))
                          (Prims.of_int (390)) (Prims.of_int (18))))))
      with
      | FStar_Tactics_Result.Success (a, ps') ->
          (match FStar_Tactics_Types.tracepoint
                   (FStar_Tactics_Types.set_proofstate_range ps'
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (390)) (Prims.of_int (2))
                            (Prims.of_int (392)) (Prims.of_int (11)))))
           with
           | true ->
               ((match a with
                 | FStar_Reflection_Data.Tv_Refine (bv, uu___) ->
                     (fun s ->
                        FStar_Tactics_Result.Success
                          (((FStar_Reflection_Builtins.inspect_bv bv).FStar_Reflection_Data.bv_sort),
                            s))
                 | uu___ -> (fun s -> FStar_Tactics_Result.Success (ty, s))))
                 (FStar_Tactics_Types.decr_depth
                    (FStar_Tactics_Types.set_proofstate_range ps'
                       (FStar_Range.prims_to_fstar_range
                          (Prims.mk_range
                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                             (Prims.of_int (390)) (Prims.of_int (2))
                             (Prims.of_int (392)) (Prims.of_int (11)))))))
      | FStar_Tactics_Result.Failed (e, ps') ->
          FStar_Tactics_Result.Failed (e, ps')
let (compute_post_type :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term ->
        FStar_Reflection_Types.term ->
          FStar_Tactics_Types.proofstate ->
            pre_post_type FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun ret_type ->
        fun post ->
          fun ps ->
            match (FStar_InteractiveHelpers_Base.print_dbg dbg
                     "[> compute_post_type")
                    (FStar_Tactics_Types.incr_depth
                       (FStar_Tactics_Types.set_proofstate_range ps
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (396)) (Prims.of_int (2))
                                (Prims.of_int (396)) (Prims.of_int (38))))))
            with
            | FStar_Tactics_Result.Success (a, ps') ->
                (match FStar_Tactics_Types.tracepoint
                         (FStar_Tactics_Types.set_proofstate_range ps'
                            (FStar_Range.prims_to_fstar_range
                               (Prims.mk_range
                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                  (Prims.of_int (397)) (Prims.of_int (2))
                                  (Prims.of_int (444)) (Prims.of_int (16)))))
                 with
                 | true ->
                     (match FStar_Tactics_Types.tracepoint
                              (FStar_Tactics_Types.set_proofstate_range
                                 (FStar_Tactics_Types.incr_depth
                                    (FStar_Tactics_Types.set_proofstate_range
                                       (FStar_Tactics_Types.decr_depth
                                          (FStar_Tactics_Types.set_proofstate_range
                                             ps'
                                             (FStar_Range.prims_to_fstar_range
                                                (Prims.mk_range
                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                   (Prims.of_int (397))
                                                   (Prims.of_int (2))
                                                   (Prims.of_int (444))
                                                   (Prims.of_int (16))))))
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (398))
                                             (Prims.of_int (4))
                                             (Prims.of_int (400))
                                             (Prims.of_int (18))))))
                                 (FStar_Range.prims_to_fstar_range
                                    (Prims.mk_range
                                       "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                       (Prims.of_int (402))
                                       (Prims.of_int (2))
                                       (Prims.of_int (444))
                                       (Prims.of_int (16)))))
                      with
                      | true ->
                          (match (FStar_InteractiveHelpers_ExploreTerm.safe_tc
                                    e post)
                                   (FStar_Tactics_Types.incr_depth
                                      (FStar_Tactics_Types.set_proofstate_range
                                         (FStar_Tactics_Types.decr_depth
                                            (FStar_Tactics_Types.set_proofstate_range
                                               (FStar_Tactics_Types.incr_depth
                                                  (FStar_Tactics_Types.set_proofstate_range
                                                     (FStar_Tactics_Types.decr_depth
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (397))
                                                                 (Prims.of_int (2))
                                                                 (Prims.of_int (444))
                                                                 (Prims.of_int (16))))))
                                                     (FStar_Range.prims_to_fstar_range
                                                        (Prims.mk_range
                                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                           (Prims.of_int (398))
                                                           (Prims.of_int (4))
                                                           (Prims.of_int (400))
                                                           (Prims.of_int (18))))))
                                               (FStar_Range.prims_to_fstar_range
                                                  (Prims.mk_range
                                                     "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                     (Prims.of_int (402))
                                                     (Prims.of_int (2))
                                                     (Prims.of_int (444))
                                                     (Prims.of_int (16))))))
                                         (FStar_Range.prims_to_fstar_range
                                            (Prims.mk_range
                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                               (Prims.of_int (402))
                                               (Prims.of_int (8))
                                               (Prims.of_int (402))
                                               (Prims.of_int (22))))))
                           with
                           | FStar_Tactics_Result.Success (a1, ps'1) ->
                               (match FStar_Tactics_Types.tracepoint
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps'1
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range
                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                 (Prims.of_int (402))
                                                 (Prims.of_int (2))
                                                 (Prims.of_int (444))
                                                 (Prims.of_int (16)))))
                                with
                                | true ->
                                    ((match a1 with
                                      | FStar_Pervasives_Native.None ->
                                          (fun ps1 ->
                                             match (FStar_InteractiveHelpers_Base.print_dbg
                                                      dbg "safe_tc failed")
                                                     (FStar_Tactics_Types.incr_depth
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps1
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (404))
                                                                 (Prims.of_int (4))
                                                                 (Prims.of_int (404))
                                                                 (Prims.of_int (34))))))
                                             with
                                             | FStar_Tactics_Result.Success
                                                 (a2, ps'2) ->
                                                 (match FStar_Tactics_Types.tracepoint
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (405))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (405))
                                                                   (Prims.of_int (14)))))
                                                  with
                                                  | true ->
                                                      FStar_Tactics_Result.Success
                                                        (PP_Unknown,
                                                          (FStar_Tactics_Types.decr_depth
                                                             (FStar_Tactics_Types.set_proofstate_range
                                                                ps'2
                                                                (FStar_Range.prims_to_fstar_range
                                                                   (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (405))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (405))
                                                                    (Prims.of_int (14))))))))
                                             | FStar_Tactics_Result.Failed
                                                 (e1, ps'2) ->
                                                 FStar_Tactics_Result.Failed
                                                   (e1, ps'2))
                                      | FStar_Pervasives_Native.Some ty ->
                                          (fun ps1 ->
                                             match (FStar_InteractiveHelpers_Base.print_dbg
                                                      dbg "safe_tc succeeded")
                                                     (FStar_Tactics_Types.incr_depth
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps1
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (407))
                                                                 (Prims.of_int (4))
                                                                 (Prims.of_int (407))
                                                                 (Prims.of_int (37))))))
                                             with
                                             | FStar_Tactics_Result.Success
                                                 (a2, ps'2) ->
                                                 (match FStar_Tactics_Types.tracepoint
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (408))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (444))
                                                                   (Prims.of_int (16)))))
                                                  with
                                                  | true ->
                                                      (match (FStar_Tactics_SyntaxHelpers.collect_arr_bs
                                                                ty)
                                                               (FStar_Tactics_Types.incr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (408))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (408))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (408))
                                                                    (Prims.of_int (34))))))
                                                       with
                                                       | FStar_Tactics_Result.Success
                                                           (a3, ps'3) ->
                                                           (match FStar_Tactics_Types.tracepoint
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (408))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16)))))
                                                            with
                                                            | true ->
                                                                ((match a3
                                                                  with
                                                                  | (brs, c)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "num binders: "
                                                                    (Prims.string_of_int
                                                                    (FStar_List_Tot_Base.length
                                                                    brs))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (409))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (409))
                                                                    (Prims.of_int (73))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (410))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match 
                                                                    (brs,
                                                                    (FStar_InteractiveHelpers_ExploreTerm.is_total_or_gtotal
                                                                    c))
                                                                    with
                                                                    | (r::[],
                                                                    true) ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Pure")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (413))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (413))
                                                                    (Prims.of_int (29))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (414))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (414))
                                                                    (Prims.of_int (13)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (PP_Pure,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (414))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (414))
                                                                    (Prims.of_int (13))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))
                                                                    | (s1::r::s2::[],
                                                                    true) ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (417))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (417))
                                                                    (Prims.of_int (33))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (417))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (417))
                                                                    (Prims.of_int (33))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (35))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (422))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (opt_remove_refin
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    s2))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (417))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (417))
                                                                    (Prims.of_int (33))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (418))
                                                                    (Prims.of_int (35))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (422))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (422))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (422))
                                                                    (Prims.of_int (54))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (45))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (45))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (45))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (425))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- ret type:\n-- target: "
                                                                    (Prims.strcat
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    ret_type)
                                                                    (Prims.strcat
                                                                    "\n-- binder: "
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    r))))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (423))
                                                                    (Prims.of_int (45))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (424))
                                                                    (Prims.of_int (45))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (425))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (425))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (426))
                                                                    (Prims.of_int (59))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (427))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- state types:\n-- binder1: "
                                                                    (Prims.strcat
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    s1))
                                                                    (Prims.strcat
                                                                    "\n-- binder2: "
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    a5)))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (427))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (427))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (428))
                                                                    (Prims.of_int (61))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a7,
                                                                    ps'7) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (429))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- ret type equality: "
                                                                    (Prims.string_of_bool
                                                                    (FStar_Reflection_Builtins.term_eq
                                                                    ret_type
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    r)))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (429))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (429))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (429))
                                                                    (Prims.of_int (74))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (430))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- state types equality: "
                                                                    (Prims.string_of_bool
                                                                    (FStar_Reflection_Builtins.term_eq
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    s1) a5))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (430))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (430))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (430))
                                                                    (Prims.of_int (79))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (431))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (if
                                                                    (FStar_Reflection_Builtins.term_eq
                                                                    ret_type
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    r)) &&
                                                                    (FStar_Reflection_Builtins.term_eq
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    s1) a5)
                                                                    then
                                                                    (fun ps4
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "PP_State"
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    s1))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (434))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (434))
                                                                    (Prims.of_int (71))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a10,
                                                                    ps'10) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (435))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (435))
                                                                    (Prims.of_int (36)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((PP_State
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    s1)),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (435))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (435))
                                                                    (Prims.of_int (36))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'10) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'10))
                                                                    else
                                                                    (fun ps4
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Unknown")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (439))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (439))
                                                                    (Prims.of_int (34))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a10,
                                                                    ps'10) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (440))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (440))
                                                                    (Prims.of_int (18)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (PP_Unknown,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (440))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (440))
                                                                    (Prims.of_int (18))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'10) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'10)))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (431))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (441))
                                                                    (Prims.of_int (11)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'9) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'9)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'8) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'8)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'7) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'7)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'6) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'6)))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))))
                                                                    | uu___
                                                                    ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Unknown")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (443))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (443))
                                                                    (Prims.of_int (32))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (PP_Unknown,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'5))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (410))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e1,
                                                                    ps'4))))
                                                                  (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (408))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (444))
                                                                    (Prims.of_int (16)))))))
                                                       | FStar_Tactics_Result.Failed
                                                           (e1, ps'3) ->
                                                           FStar_Tactics_Result.Failed
                                                             (e1, ps'3)))
                                             | FStar_Tactics_Result.Failed
                                                 (e1, ps'2) ->
                                                 FStar_Tactics_Result.Failed
                                                   (e1, ps'2))))
                                      (FStar_Tactics_Types.decr_depth
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps'1
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (402))
                                                  (Prims.of_int (2))
                                                  (Prims.of_int (444))
                                                  (Prims.of_int (16)))))))
                           | FStar_Tactics_Result.Failed (e1, ps'1) ->
                               FStar_Tactics_Result.Failed (e1, ps'1))))
            | FStar_Tactics_Result.Failed (e1, ps') ->
                FStar_Tactics_Result.Failed (e1, ps')
let (check_pre_post_type :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term ->
        FStar_Reflection_Types.term ->
          FStar_Reflection_Types.term ->
            FStar_Tactics_Types.proofstate ->
              pre_post_type FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun pre ->
        fun ret_type ->
          fun post ->
            fun ps ->
              match (FStar_InteractiveHelpers_Base.print_dbg dbg
                       "[> check_pre_post_type")
                      (FStar_Tactics_Types.incr_depth
                         (FStar_Tactics_Types.set_proofstate_range ps
                            (FStar_Range.prims_to_fstar_range
                               (Prims.mk_range
                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                  (Prims.of_int (448)) (Prims.of_int (2))
                                  (Prims.of_int (448)) (Prims.of_int (40))))))
              with
              | FStar_Tactics_Result.Success (a, ps') ->
                  (match FStar_Tactics_Types.tracepoint
                           (FStar_Tactics_Types.set_proofstate_range ps'
                              (FStar_Range.prims_to_fstar_range
                                 (Prims.mk_range
                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                    (Prims.of_int (449)) (Prims.of_int (2))
                                    (Prims.of_int (458)) (Prims.of_int (14)))))
                   with
                   | true ->
                       (match match (compute_pre_type dbg e pre)
                                      (FStar_Tactics_Types.incr_depth
                                         (FStar_Tactics_Types.set_proofstate_range
                                            (FStar_Tactics_Types.incr_depth
                                               (FStar_Tactics_Types.set_proofstate_range
                                                  (FStar_Tactics_Types.decr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (449))
                                                              (Prims.of_int (2))
                                                              (Prims.of_int (458))
                                                              (Prims.of_int (14))))))
                                                  (FStar_Range.prims_to_fstar_range
                                                     (Prims.mk_range
                                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                        (Prims.of_int (449))
                                                        (Prims.of_int (8))
                                                        (Prims.of_int (449))
                                                        (Prims.of_int (73))))))
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (449))
                                                  (Prims.of_int (8))
                                                  (Prims.of_int (449))
                                                  (Prims.of_int (34))))))
                              with
                              | FStar_Tactics_Result.Success (a1, ps'1) ->
                                  (match FStar_Tactics_Types.tracepoint
                                           (FStar_Tactics_Types.set_proofstate_range
                                              ps'1
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range
                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                    (Prims.of_int (449))
                                                    (Prims.of_int (8))
                                                    (Prims.of_int (449))
                                                    (Prims.of_int (73)))))
                                   with
                                   | true ->
                                       (match (compute_post_type dbg e
                                                 ret_type post)
                                                (FStar_Tactics_Types.incr_depth
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      (FStar_Tactics_Types.decr_depth
                                                         (FStar_Tactics_Types.set_proofstate_range
                                                            ps'1
                                                            (FStar_Range.prims_to_fstar_range
                                                               (Prims.mk_range
                                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                  (Prims.of_int (449))
                                                                  (Prims.of_int (8))
                                                                  (Prims.of_int (449))
                                                                  (Prims.of_int (73))))))
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (449))
                                                            (Prims.of_int (36))
                                                            (Prims.of_int (449))
                                                            (Prims.of_int (73))))))
                                        with
                                        | FStar_Tactics_Result.Success
                                            (a2, ps'2) ->
                                            (match FStar_Tactics_Types.tracepoint
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'2
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (449))
                                                              (Prims.of_int (8))
                                                              (Prims.of_int (449))
                                                              (Prims.of_int (73)))))
                                             with
                                             | true ->
                                                 FStar_Tactics_Result.Success
                                                   ((a1, a2),
                                                     (FStar_Tactics_Types.decr_depth
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'2
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (449))
                                                                 (Prims.of_int (8))
                                                                 (Prims.of_int (449))
                                                                 (Prims.of_int (73))))))))
                                        | FStar_Tactics_Result.Failed
                                            (e1, ps'2) ->
                                            FStar_Tactics_Result.Failed
                                              (e1, ps'2)))
                              | FStar_Tactics_Result.Failed (e1, ps'1) ->
                                  FStar_Tactics_Result.Failed (e1, ps'1)
                        with
                        | FStar_Tactics_Result.Success (a1, ps'1) ->
                            (match FStar_Tactics_Types.tracepoint
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps'1
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (449))
                                              (Prims.of_int (2))
                                              (Prims.of_int (458))
                                              (Prims.of_int (14)))))
                             with
                             | true ->
                                 ((match a1 with
                                   | (PP_Pure, PP_Pure) ->
                                       (fun ps1 ->
                                          match (FStar_InteractiveHelpers_Base.print_dbg
                                                   dbg "PP_Pure, PP_Pure")
                                                  (FStar_Tactics_Types.incr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps1
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (451))
                                                              (Prims.of_int (4))
                                                              (Prims.of_int (451))
                                                              (Prims.of_int (36))))))
                                          with
                                          | FStar_Tactics_Result.Success
                                              (a2, ps'2) ->
                                              (match FStar_Tactics_Types.tracepoint
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps'2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (452))
                                                                (Prims.of_int (4))
                                                                (Prims.of_int (452))
                                                                (Prims.of_int (11)))))
                                               with
                                               | true ->
                                                   FStar_Tactics_Result.Success
                                                     (PP_Pure,
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (452))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (452))
                                                                   (Prims.of_int (11))))))))
                                          | FStar_Tactics_Result.Failed
                                              (e1, ps'2) ->
                                              FStar_Tactics_Result.Failed
                                                (e1, ps'2))
                                   | (PP_State ty1, PP_State ty2) ->
                                       (fun ps1 ->
                                          match (FStar_InteractiveHelpers_Base.print_dbg
                                                   dbg "PP_State, PP_State")
                                                  (FStar_Tactics_Types.incr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps1
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (454))
                                                              (Prims.of_int (4))
                                                              (Prims.of_int (454))
                                                              (Prims.of_int (38))))))
                                          with
                                          | FStar_Tactics_Result.Success
                                              (a2, ps'2) ->
                                              (match FStar_Tactics_Types.tracepoint
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps'2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (455))
                                                                (Prims.of_int (4))
                                                                (Prims.of_int (455))
                                                                (Prims.of_int (56)))))
                                               with
                                               | true ->
                                                   FStar_Tactics_Result.Success
                                                     ((if
                                                         FStar_Reflection_Builtins.term_eq
                                                           ty1 ty2
                                                       then PP_State ty1
                                                       else PP_Unknown),
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (455))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (455))
                                                                   (Prims.of_int (56))))))))
                                          | FStar_Tactics_Result.Failed
                                              (e1, ps'2) ->
                                              FStar_Tactics_Result.Failed
                                                (e1, ps'2))
                                   | uu___ ->
                                       (fun ps1 ->
                                          match (FStar_InteractiveHelpers_Base.print_dbg
                                                   dbg "_, _")
                                                  (FStar_Tactics_Types.incr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps1
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (457))
                                                              (Prims.of_int (4))
                                                              (Prims.of_int (457))
                                                              (Prims.of_int (24))))))
                                          with
                                          | FStar_Tactics_Result.Success
                                              (a2, ps'2) ->
                                              (match FStar_Tactics_Types.tracepoint
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps'2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (458))
                                                                (Prims.of_int (4))
                                                                (Prims.of_int (458))
                                                                (Prims.of_int (14)))))
                                               with
                                               | true ->
                                                   FStar_Tactics_Result.Success
                                                     (PP_Unknown,
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (458))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (458))
                                                                   (Prims.of_int (14))))))))
                                          | FStar_Tactics_Result.Failed
                                              (e1, ps'2) ->
                                              FStar_Tactics_Result.Failed
                                                (e1, ps'2))))
                                   (FStar_Tactics_Types.decr_depth
                                      (FStar_Tactics_Types.set_proofstate_range
                                         ps'1
                                         (FStar_Range.prims_to_fstar_range
                                            (Prims.mk_range
                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                               (Prims.of_int (449))
                                               (Prims.of_int (2))
                                               (Prims.of_int (458))
                                               (Prims.of_int (14)))))))
                        | FStar_Tactics_Result.Failed (e1, ps'1) ->
                            FStar_Tactics_Result.Failed (e1, ps'1)))
              | FStar_Tactics_Result.Failed (e1, ps') ->
                  FStar_Tactics_Result.Failed (e1, ps')
let (check_opt_pre_post_type :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
        FStar_Reflection_Types.term ->
          FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
            FStar_Tactics_Types.proofstate ->
              pre_post_type FStar_Pervasives_Native.option
                FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun opt_pre ->
        fun ret_type ->
          fun opt_post ->
            fun ps ->
              match (FStar_InteractiveHelpers_Base.print_dbg dbg
                       "[> check_opt_pre_post_type")
                      (FStar_Tactics_Types.incr_depth
                         (FStar_Tactics_Types.set_proofstate_range ps
                            (FStar_Range.prims_to_fstar_range
                               (Prims.mk_range
                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                  (Prims.of_int (462)) (Prims.of_int (2))
                                  (Prims.of_int (462)) (Prims.of_int (44))))))
              with
              | FStar_Tactics_Result.Success (a, ps') ->
                  (match FStar_Tactics_Types.tracepoint
                           (FStar_Tactics_Types.set_proofstate_range ps'
                              (FStar_Range.prims_to_fstar_range
                                 (Prims.mk_range
                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                    (Prims.of_int (463)) (Prims.of_int (2))
                                    (Prims.of_int (475)) (Prims.of_int (8)))))
                   with
                   | true ->
                       ((match (opt_pre, opt_post) with
                         | (FStar_Pervasives_Native.Some pre,
                            FStar_Pervasives_Native.Some post) ->
                             (fun ps1 ->
                                match (FStar_InteractiveHelpers_Base.print_dbg
                                         dbg "Some pre, Some post")
                                        (FStar_Tactics_Types.incr_depth
                                           (FStar_Tactics_Types.set_proofstate_range
                                              ps1
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range
                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                    (Prims.of_int (465))
                                                    (Prims.of_int (4))
                                                    (Prims.of_int (465))
                                                    (Prims.of_int (39))))))
                                with
                                | FStar_Tactics_Result.Success (a1, ps'1) ->
                                    (match FStar_Tactics_Types.tracepoint
                                             (FStar_Tactics_Types.set_proofstate_range
                                                ps'1
                                                (FStar_Range.prims_to_fstar_range
                                                   (Prims.mk_range
                                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                      (Prims.of_int (466))
                                                      (Prims.of_int (4))
                                                      (Prims.of_int (466))
                                                      (Prims.of_int (54)))))
                                     with
                                     | true ->
                                         (match (check_pre_post_type dbg e
                                                   pre ret_type post)
                                                  (FStar_Tactics_Types.incr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        (FStar_Tactics_Types.decr_depth
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              ps'1
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (466))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (466))
                                                                    (Prims.of_int (54))))))
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (466))
                                                              (Prims.of_int (9))
                                                              (Prims.of_int (466))
                                                              (Prims.of_int (54))))))
                                          with
                                          | FStar_Tactics_Result.Success
                                              (a2, ps'2) ->
                                              (match FStar_Tactics_Types.tracepoint
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps'2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (466))
                                                                (Prims.of_int (4))
                                                                (Prims.of_int (466))
                                                                (Prims.of_int (54)))))
                                               with
                                               | true ->
                                                   FStar_Tactics_Result.Success
                                                     ((FStar_Pervasives_Native.Some
                                                         a2),
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (466))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (466))
                                                                   (Prims.of_int (54))))))))
                                          | FStar_Tactics_Result.Failed
                                              (e1, ps'2) ->
                                              FStar_Tactics_Result.Failed
                                                (e1, ps'2)))
                                | FStar_Tactics_Result.Failed (e1, ps'1) ->
                                    FStar_Tactics_Result.Failed (e1, ps'1))
                         | (FStar_Pervasives_Native.Some pre,
                            FStar_Pervasives_Native.None) ->
                             (fun ps1 ->
                                match (FStar_InteractiveHelpers_Base.print_dbg
                                         dbg "Some pre, None")
                                        (FStar_Tactics_Types.incr_depth
                                           (FStar_Tactics_Types.set_proofstate_range
                                              ps1
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range
                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                    (Prims.of_int (468))
                                                    (Prims.of_int (4))
                                                    (Prims.of_int (468))
                                                    (Prims.of_int (34))))))
                                with
                                | FStar_Tactics_Result.Success (a1, ps'1) ->
                                    (match FStar_Tactics_Types.tracepoint
                                             (FStar_Tactics_Types.set_proofstate_range
                                                ps'1
                                                (FStar_Range.prims_to_fstar_range
                                                   (Prims.mk_range
                                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                      (Prims.of_int (469))
                                                      (Prims.of_int (4))
                                                      (Prims.of_int (469))
                                                      (Prims.of_int (37)))))
                                     with
                                     | true ->
                                         (match (compute_pre_type dbg e pre)
                                                  (FStar_Tactics_Types.incr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        (FStar_Tactics_Types.decr_depth
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              ps'1
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (469))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (469))
                                                                    (Prims.of_int (37))))))
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (469))
                                                              (Prims.of_int (9))
                                                              (Prims.of_int (469))
                                                              (Prims.of_int (37))))))
                                          with
                                          | FStar_Tactics_Result.Success
                                              (a2, ps'2) ->
                                              (match FStar_Tactics_Types.tracepoint
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps'2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (469))
                                                                (Prims.of_int (4))
                                                                (Prims.of_int (469))
                                                                (Prims.of_int (37)))))
                                               with
                                               | true ->
                                                   FStar_Tactics_Result.Success
                                                     ((FStar_Pervasives_Native.Some
                                                         a2),
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (469))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (469))
                                                                   (Prims.of_int (37))))))))
                                          | FStar_Tactics_Result.Failed
                                              (e1, ps'2) ->
                                              FStar_Tactics_Result.Failed
                                                (e1, ps'2)))
                                | FStar_Tactics_Result.Failed (e1, ps'1) ->
                                    FStar_Tactics_Result.Failed (e1, ps'1))
                         | (FStar_Pervasives_Native.None,
                            FStar_Pervasives_Native.Some post) ->
                             (fun ps1 ->
                                match (FStar_InteractiveHelpers_Base.print_dbg
                                         dbg "None, Some post")
                                        (FStar_Tactics_Types.incr_depth
                                           (FStar_Tactics_Types.set_proofstate_range
                                              ps1
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range
                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                    (Prims.of_int (471))
                                                    (Prims.of_int (4))
                                                    (Prims.of_int (471))
                                                    (Prims.of_int (35))))))
                                with
                                | FStar_Tactics_Result.Success (a1, ps'1) ->
                                    (match FStar_Tactics_Types.tracepoint
                                             (FStar_Tactics_Types.set_proofstate_range
                                                ps'1
                                                (FStar_Range.prims_to_fstar_range
                                                   (Prims.mk_range
                                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                      (Prims.of_int (472))
                                                      (Prims.of_int (4))
                                                      (Prims.of_int (472))
                                                      (Prims.of_int (48)))))
                                     with
                                     | true ->
                                         (match (compute_post_type dbg e
                                                   ret_type post)
                                                  (FStar_Tactics_Types.incr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        (FStar_Tactics_Types.decr_depth
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              ps'1
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (472))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (472))
                                                                    (Prims.of_int (48))))))
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (472))
                                                              (Prims.of_int (9))
                                                              (Prims.of_int (472))
                                                              (Prims.of_int (48))))))
                                          with
                                          | FStar_Tactics_Result.Success
                                              (a2, ps'2) ->
                                              (match FStar_Tactics_Types.tracepoint
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps'2
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (472))
                                                                (Prims.of_int (4))
                                                                (Prims.of_int (472))
                                                                (Prims.of_int (48)))))
                                               with
                                               | true ->
                                                   FStar_Tactics_Result.Success
                                                     ((FStar_Pervasives_Native.Some
                                                         a2),
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (472))
                                                                   (Prims.of_int (4))
                                                                   (Prims.of_int (472))
                                                                   (Prims.of_int (48))))))))
                                          | FStar_Tactics_Result.Failed
                                              (e1, ps'2) ->
                                              FStar_Tactics_Result.Failed
                                                (e1, ps'2)))
                                | FStar_Tactics_Result.Failed (e1, ps'1) ->
                                    FStar_Tactics_Result.Failed (e1, ps'1))
                         | (FStar_Pervasives_Native.None,
                            FStar_Pervasives_Native.None) ->
                             (fun ps1 ->
                                match (FStar_InteractiveHelpers_Base.print_dbg
                                         dbg "None, None")
                                        (FStar_Tactics_Types.incr_depth
                                           (FStar_Tactics_Types.set_proofstate_range
                                              ps1
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range
                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                    (Prims.of_int (474))
                                                    (Prims.of_int (4))
                                                    (Prims.of_int (474))
                                                    (Prims.of_int (30))))))
                                with
                                | FStar_Tactics_Result.Success (a1, ps'1) ->
                                    (match FStar_Tactics_Types.tracepoint
                                             (FStar_Tactics_Types.set_proofstate_range
                                                ps'1
                                                (FStar_Range.prims_to_fstar_range
                                                   (Prims.mk_range
                                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                      (Prims.of_int (475))
                                                      (Prims.of_int (4))
                                                      (Prims.of_int (475))
                                                      (Prims.of_int (8)))))
                                     with
                                     | true ->
                                         FStar_Tactics_Result.Success
                                           (FStar_Pervasives_Native.None,
                                             (FStar_Tactics_Types.decr_depth
                                                (FStar_Tactics_Types.set_proofstate_range
                                                   ps'1
                                                   (FStar_Range.prims_to_fstar_range
                                                      (Prims.mk_range
                                                         "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                         (Prims.of_int (475))
                                                         (Prims.of_int (4))
                                                         (Prims.of_int (475))
                                                         (Prims.of_int (8))))))))
                                | FStar_Tactics_Result.Failed (e1, ps'1) ->
                                    FStar_Tactics_Result.Failed (e1, ps'1))))
                         (FStar_Tactics_Types.decr_depth
                            (FStar_Tactics_Types.set_proofstate_range ps'
                               (FStar_Range.prims_to_fstar_range
                                  (Prims.mk_range
                                     "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                     (Prims.of_int (463)) (Prims.of_int (2))
                                     (Prims.of_int (475)) (Prims.of_int (8)))))))
              | FStar_Tactics_Result.Failed (e1, ps') ->
                  FStar_Tactics_Result.Failed (e1, ps')
let rec (_introduce_variables_for_abs :
  FStar_InteractiveHelpers_Base.genv ->
    FStar_Reflection_Types.typ ->
      FStar_Tactics_Types.proofstate ->
        (FStar_Reflection_Types.term Prims.list *
          FStar_Reflection_Types.binder Prims.list *
          FStar_InteractiveHelpers_Base.genv) FStar_Tactics_Result.__result)
  =
  fun ge ->
    fun ty ->
      fun ps ->
        match (FStar_Tactics_Builtins.inspect ty)
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (479)) (Prims.of_int (8))
                            (Prims.of_int (479)) (Prims.of_int (18))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (479)) (Prims.of_int (2))
                              (Prims.of_int (490)) (Prims.of_int (18)))))
             with
             | true ->
                 ((match a with
                   | FStar_Reflection_Data.Tv_Arrow (b, c) ->
                       (fun ps1 ->
                          match (FStar_InteractiveHelpers_Base.genv_push_fresh_binder
                                   ge
                                   (Prims.strcat "__"
                                      (FStar_Reflection_Derived.name_of_binder
                                         b))
                                   (FStar_Reflection_Derived.type_of_binder b))
                                  (FStar_Tactics_Types.incr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps1
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (481))
                                              (Prims.of_int (18))
                                              (Prims.of_int (481))
                                              (Prims.of_int (88))))))
                          with
                          | FStar_Tactics_Result.Success (a1, ps'1) ->
                              (match FStar_Tactics_Types.tracepoint
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (481))
                                                (Prims.of_int (4))
                                                (Prims.of_int (489))
                                                (Prims.of_int (7)))))
                               with
                               | true ->
                                   ((match a1 with
                                     | (ge1, b1) ->
                                         (fun ps2 ->
                                            match FStar_Tactics_Types.tracepoint
                                                    (FStar_Tactics_Types.set_proofstate_range
                                                       (FStar_Tactics_Types.incr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps2
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (482))
                                                                   (Prims.of_int (14))
                                                                   (Prims.of_int (482))
                                                                   (Prims.of_int (29))))))
                                                       (FStar_Range.prims_to_fstar_range
                                                          (Prims.mk_range
                                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                             (Prims.of_int (483))
                                                             (Prims.of_int (4))
                                                             (Prims.of_int (489))
                                                             (Prims.of_int (7)))))
                                            with
                                            | true ->
                                                (match (FStar_Tactics_Builtins.pack
                                                          (FStar_Reflection_Data.Tv_Var
                                                             (FStar_Reflection_Derived.bv_of_binder
                                                                b1)))
                                                         (FStar_Tactics_Types.incr_depth
                                                            (FStar_Tactics_Types.set_proofstate_range
                                                               (FStar_Tactics_Types.decr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (482))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (482))
                                                                    (Prims.of_int (29))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (483))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (489))
                                                                    (Prims.of_int (7))))))
                                                               (FStar_Range.prims_to_fstar_range
                                                                  (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (483))
                                                                    (Prims.of_int (13))
                                                                    (Prims.of_int (483))
                                                                    (Prims.of_int (30))))))
                                                 with
                                                 | FStar_Tactics_Result.Success
                                                     (a2, ps'2) ->
                                                     (match FStar_Tactics_Types.tracepoint
                                                              (FStar_Tactics_Types.set_proofstate_range
                                                                 ps'2
                                                                 (FStar_Range.prims_to_fstar_range
                                                                    (
                                                                    Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (484))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (488))
                                                                    (Prims.of_int (29)))))
                                                      with
                                                      | true ->
                                                          ((match FStar_InteractiveHelpers_ExploreTerm.get_total_or_gtotal_ret_type
                                                                    c
                                                            with
                                                            | FStar_Pervasives_Native.Some
                                                                ty1 ->
                                                                (fun ps3 ->
                                                                   match 
                                                                    (_introduce_variables_for_abs
                                                                    ge1 ty1)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (486))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (486))
                                                                    (Prims.of_int (60))))))
                                                                   with
                                                                   | 
                                                                   FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (486))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (487))
                                                                    (Prims.of_int (29)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (((
                                                                    match a3
                                                                    with
                                                                    | 
                                                                    (vl, bl,
                                                                    ge2) ->
                                                                    ((a2 ::
                                                                    vl), (b1
                                                                    :: bl),
                                                                    ge2))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (486))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (487))
                                                                    (Prims.of_int (29))))))))
                                                                   | 
                                                                   FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                            | FStar_Pervasives_Native.None
                                                                ->
                                                                (fun s ->
                                                                   FStar_Tactics_Result.Success
                                                                    (([a2],
                                                                    [b1],
                                                                    ge1), s))))
                                                            (FStar_Tactics_Types.decr_depth
                                                               (FStar_Tactics_Types.set_proofstate_range
                                                                  ps'2
                                                                  (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (484))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (488))
                                                                    (Prims.of_int (29)))))))
                                                 | FStar_Tactics_Result.Failed
                                                     (e, ps'2) ->
                                                     FStar_Tactics_Result.Failed
                                                       (e, ps'2)))))
                                     (FStar_Tactics_Types.decr_depth
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps'1
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range
                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                 (Prims.of_int (481))
                                                 (Prims.of_int (4))
                                                 (Prims.of_int (489))
                                                 (Prims.of_int (7)))))))
                          | FStar_Tactics_Result.Failed (e, ps'1) ->
                              FStar_Tactics_Result.Failed (e, ps'1))
                   | uu___ ->
                       (fun s ->
                          FStar_Tactics_Result.Success (([], [], ge), s))))
                   (FStar_Tactics_Types.decr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps'
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (479)) (Prims.of_int (2))
                               (Prims.of_int (490)) (Prims.of_int (18)))))))
        | FStar_Tactics_Result.Failed (e, ps') ->
            FStar_Tactics_Result.Failed (e, ps')
let (introduce_variables_for_abs :
  FStar_InteractiveHelpers_Base.genv ->
    FStar_Reflection_Types.term ->
      FStar_Tactics_Types.proofstate ->
        (FStar_Reflection_Types.term Prims.list *
          FStar_Reflection_Types.binder Prims.list *
          FStar_InteractiveHelpers_Base.genv) FStar_Tactics_Result.__result)
  =
  fun ge ->
    fun tm ->
      fun ps ->
        match (FStar_InteractiveHelpers_ExploreTerm.safe_tc
                 ge.FStar_InteractiveHelpers_Base.env tm)
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (494)) (Prims.of_int (8))
                            (Prims.of_int (494)) (Prims.of_int (25))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (494)) (Prims.of_int (2))
                              (Prims.of_int (496)) (Prims.of_int (22)))))
             with
             | true ->
                 ((match a with
                   | FStar_Pervasives_Native.Some ty ->
                       _introduce_variables_for_abs ge ty
                   | FStar_Pervasives_Native.None ->
                       (fun s ->
                          FStar_Tactics_Result.Success (([], [], ge), s))))
                   (FStar_Tactics_Types.decr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps'
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (494)) (Prims.of_int (2))
                               (Prims.of_int (496)) (Prims.of_int (22)))))))
        | FStar_Tactics_Result.Failed (e, ps') ->
            FStar_Tactics_Result.Failed (e, ps')
let (introduce_variables_for_opt_abs :
  FStar_InteractiveHelpers_Base.genv ->
    FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
      FStar_Tactics_Types.proofstate ->
        (FStar_Reflection_Types.term Prims.list *
          FStar_Reflection_Types.binder Prims.list *
          FStar_InteractiveHelpers_Base.genv) FStar_Tactics_Result.__result)
  =
  fun ge ->
    fun opt_tm ->
      match opt_tm with
      | FStar_Pervasives_Native.Some tm -> introduce_variables_for_abs ge tm
      | FStar_Pervasives_Native.None ->
          (fun s -> FStar_Tactics_Result.Success (([], [], ge), s))
let (effect_type_is_stateful :
  FStar_InteractiveHelpers_ExploreTerm.effect_type -> Prims.bool) =
  fun etype ->
    match etype with
    | FStar_InteractiveHelpers_ExploreTerm.E_Total -> false
    | FStar_InteractiveHelpers_ExploreTerm.E_GTotal -> false
    | FStar_InteractiveHelpers_ExploreTerm.E_Lemma -> false
    | FStar_InteractiveHelpers_ExploreTerm.E_PURE -> false
    | FStar_InteractiveHelpers_ExploreTerm.E_Pure -> false
    | FStar_InteractiveHelpers_ExploreTerm.E_Stack -> true
    | FStar_InteractiveHelpers_ExploreTerm.E_ST -> true
    | FStar_InteractiveHelpers_ExploreTerm.E_Unknown -> true
let (is_st_get :
  Prims.bool ->
    FStar_Reflection_Types.term ->
      FStar_Tactics_Types.proofstate ->
        Prims.bool FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun t ->
      fun ps ->
        match (FStar_InteractiveHelpers_Base.print_dbg dbg
                 (Prims.strcat "[> is_st_get:\n"
                    (FStar_Reflection_Builtins.term_to_string t)))
                (FStar_Tactics_Types.incr_depth
                   (FStar_Tactics_Types.set_proofstate_range ps
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (512)) (Prims.of_int (2))
                            (Prims.of_int (512)) (Prims.of_int (54))))))
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (513)) (Prims.of_int (2))
                              (Prims.of_int (526)) (Prims.of_int (9)))))
             with
             | true ->
                 (match (FStar_Tactics_Builtins.inspect t)
                          (FStar_Tactics_Types.incr_depth
                             (FStar_Tactics_Types.set_proofstate_range
                                (FStar_Tactics_Types.decr_depth
                                   (FStar_Tactics_Types.set_proofstate_range
                                      ps'
                                      (FStar_Range.prims_to_fstar_range
                                         (Prims.mk_range
                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                            (Prims.of_int (513))
                                            (Prims.of_int (2))
                                            (Prims.of_int (526))
                                            (Prims.of_int (9))))))
                                (FStar_Range.prims_to_fstar_range
                                   (Prims.mk_range
                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                      (Prims.of_int (513)) (Prims.of_int (8))
                                      (Prims.of_int (513))
                                      (Prims.of_int (17))))))
                  with
                  | FStar_Tactics_Result.Success (a1, ps'1) ->
                      (match FStar_Tactics_Types.tracepoint
                               (FStar_Tactics_Types.set_proofstate_range ps'1
                                  (FStar_Range.prims_to_fstar_range
                                     (Prims.mk_range
                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                        (Prims.of_int (513))
                                        (Prims.of_int (2))
                                        (Prims.of_int (526))
                                        (Prims.of_int (9)))))
                       with
                       | true ->
                           ((match a1 with
                             | FStar_Reflection_Data.Tv_App (hd, (a2, qual))
                                 ->
                                 (fun ps1 ->
                                    match (FStar_InteractiveHelpers_Base.print_dbg
                                             dbg "-> Is Tv_App")
                                            (FStar_Tactics_Types.incr_depth
                                               (FStar_Tactics_Types.set_proofstate_range
                                                  ps1
                                                  (FStar_Range.prims_to_fstar_range
                                                     (Prims.mk_range
                                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                        (Prims.of_int (515))
                                                        (Prims.of_int (4))
                                                        (Prims.of_int (515))
                                                        (Prims.of_int (32))))))
                                    with
                                    | FStar_Tactics_Result.Success (a3, ps'2)
                                        ->
                                        (match FStar_Tactics_Types.tracepoint
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps'2
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (516))
                                                          (Prims.of_int (10))
                                                          (Prims.of_int (522))
                                                          (Prims.of_int (11)))))
                                         with
                                         | true ->
                                             (match (FStar_Tactics_Builtins.inspect
                                                       hd)
                                                      (FStar_Tactics_Types.incr_depth
                                                         (FStar_Tactics_Types.set_proofstate_range
                                                            (FStar_Tactics_Types.decr_depth
                                                               (FStar_Tactics_Types.set_proofstate_range
                                                                  ps'2
                                                                  (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (516))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (11))))))
                                                            (FStar_Range.prims_to_fstar_range
                                                               (Prims.mk_range
                                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                  (Prims.of_int (516))
                                                                  (Prims.of_int (16))
                                                                  (Prims.of_int (516))
                                                                  (Prims.of_int (26))))))
                                              with
                                              | FStar_Tactics_Result.Success
                                                  (a4, ps'3) ->
                                                  (match FStar_Tactics_Types.tracepoint
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              ps'3
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (516))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (11)))))
                                                   with
                                                   | true ->
                                                       ((match a4 with
                                                         | FStar_Reflection_Data.Tv_FVar
                                                             fv ->
                                                             (fun ps2 ->
                                                                match 
                                                                  (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "-> Head is Tv_FVar: "
                                                                    (FStar_Reflection_Derived.fv_to_string
                                                                    fv)))
                                                                    (
                                                                    FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (518))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (518))
                                                                    (Prims.of_int (62))))))
                                                                with
                                                                | FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'4) ->
                                                                    (
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (519))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (519))
                                                                    (Prims.of_int (56)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_InteractiveHelpers_Base.fv_eq_name
                                                                    fv
                                                                    ["FStar";
                                                                    "HyperStack";
                                                                    "ST";
                                                                    "get"]),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (519))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (519))
                                                                    (Prims.of_int (56))))))))
                                                                | FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))
                                                         | uu___ ->
                                                             (fun ps2 ->
                                                                match 
                                                                  (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "-> Head is not Tv_FVar")
                                                                    (
                                                                    FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (521))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (521))
                                                                    (Prims.of_int (44))))))
                                                                with
                                                                | FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'4) ->
                                                                    (
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (11)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (false,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (11))))))))
                                                                | FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))))
                                                         (FStar_Tactics_Types.decr_depth
                                                            (FStar_Tactics_Types.set_proofstate_range
                                                               ps'3
                                                               (FStar_Range.prims_to_fstar_range
                                                                  (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (516))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (522))
                                                                    (Prims.of_int (11)))))))
                                              | FStar_Tactics_Result.Failed
                                                  (e, ps'3) ->
                                                  FStar_Tactics_Result.Failed
                                                    (e, ps'3)))
                                    | FStar_Tactics_Result.Failed (e, ps'2)
                                        ->
                                        FStar_Tactics_Result.Failed (e, ps'2))
                             | uu___ ->
                                 (fun ps1 ->
                                    match (FStar_InteractiveHelpers_Base.print_dbg
                                             dbg "-> Is not Tv_App")
                                            (FStar_Tactics_Types.incr_depth
                                               (FStar_Tactics_Types.set_proofstate_range
                                                  ps1
                                                  (FStar_Range.prims_to_fstar_range
                                                     (Prims.mk_range
                                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                        (Prims.of_int (525))
                                                        (Prims.of_int (4))
                                                        (Prims.of_int (525))
                                                        (Prims.of_int (36))))))
                                    with
                                    | FStar_Tactics_Result.Success (a2, ps'2)
                                        ->
                                        (match FStar_Tactics_Types.tracepoint
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps'2
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (526))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (526))
                                                          (Prims.of_int (9)))))
                                         with
                                         | true ->
                                             FStar_Tactics_Result.Success
                                               (false,
                                                 (FStar_Tactics_Types.decr_depth
                                                    (FStar_Tactics_Types.set_proofstate_range
                                                       ps'2
                                                       (FStar_Range.prims_to_fstar_range
                                                          (Prims.mk_range
                                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                             (Prims.of_int (526))
                                                             (Prims.of_int (4))
                                                             (Prims.of_int (526))
                                                             (Prims.of_int (9))))))))
                                    | FStar_Tactics_Result.Failed (e, ps'2)
                                        ->
                                        FStar_Tactics_Result.Failed (e, ps'2))))
                             (FStar_Tactics_Types.decr_depth
                                (FStar_Tactics_Types.set_proofstate_range
                                   ps'1
                                   (FStar_Range.prims_to_fstar_range
                                      (Prims.mk_range
                                         "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                         (Prims.of_int (513))
                                         (Prims.of_int (2))
                                         (Prims.of_int (526))
                                         (Prims.of_int (9)))))))
                  | FStar_Tactics_Result.Failed (e, ps'1) ->
                      FStar_Tactics_Result.Failed (e, ps'1)))
        | FStar_Tactics_Result.Failed (e, ps') ->
            FStar_Tactics_Result.Failed (e, ps')
let (is_let_st_get :
  Prims.bool ->
    FStar_Reflection_Data.term_view ->
      FStar_Tactics_Types.proofstate ->
        FStar_Reflection_Types.bv FStar_Pervasives_Native.option
          FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun t ->
      fun ps ->
        match match match match (FStar_Tactics_Builtins.pack t)
                                  (FStar_Tactics_Types.incr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        (FStar_Tactics_Types.incr_depth
                                           (FStar_Tactics_Types.set_proofstate_range
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    (FStar_Tactics_Types.incr_depth
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          ps
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (529))
                                                                (Prims.of_int (2))
                                                                (Prims.of_int (529))
                                                                (Prims.of_int (58))))))
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (529))
                                                          (Prims.of_int (16))
                                                          (Prims.of_int (529))
                                                          (Prims.of_int (58))))))
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range
                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                    (Prims.of_int (529))
                                                    (Prims.of_int (41))
                                                    (Prims.of_int (529))
                                                    (Prims.of_int (57))))))
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (528))
                                              (Prims.of_int (23))
                                              (Prims.of_int (528))
                                              (Prims.of_int (24))))))
                          with
                          | FStar_Tactics_Result.Success (a, ps') ->
                              (match FStar_Tactics_Types.tracepoint
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (529))
                                                (Prims.of_int (41))
                                                (Prims.of_int (529))
                                                (Prims.of_int (57)))))
                               with
                               | true ->
                                   FStar_Tactics_Result.Success
                                     ((FStar_Reflection_Builtins.term_to_string
                                         a),
                                       (FStar_Tactics_Types.decr_depth
                                          (FStar_Tactics_Types.set_proofstate_range
                                             ps'
                                             (FStar_Range.prims_to_fstar_range
                                                (Prims.mk_range
                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                   (Prims.of_int (529))
                                                   (Prims.of_int (41))
                                                   (Prims.of_int (529))
                                                   (Prims.of_int (57))))))))
                          | FStar_Tactics_Result.Failed (e, ps') ->
                              FStar_Tactics_Result.Failed (e, ps')
                    with
                    | FStar_Tactics_Result.Success (a, ps') ->
                        (match FStar_Tactics_Types.tracepoint
                                 (FStar_Tactics_Types.set_proofstate_range
                                    ps'
                                    (FStar_Range.prims_to_fstar_range
                                       (Prims.mk_range "prims.fst"
                                          (Prims.of_int (603))
                                          (Prims.of_int (19))
                                          (Prims.of_int (603))
                                          (Prims.of_int (31)))))
                         with
                         | true ->
                             FStar_Tactics_Result.Success
                               ((Prims.strcat "[> is_let_st_get:\n" a),
                                 (FStar_Tactics_Types.decr_depth
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps'
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range "prims.fst"
                                             (Prims.of_int (603))
                                             (Prims.of_int (19))
                                             (Prims.of_int (603))
                                             (Prims.of_int (31))))))))
                    | FStar_Tactics_Result.Failed (e, ps') ->
                        FStar_Tactics_Result.Failed (e, ps')
              with
              | FStar_Tactics_Result.Success (a, ps') ->
                  (match FStar_Tactics_Types.tracepoint
                           (FStar_Tactics_Types.set_proofstate_range ps'
                              (FStar_Range.prims_to_fstar_range
                                 (Prims.mk_range
                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                    (Prims.of_int (529)) (Prims.of_int (2))
                                    (Prims.of_int (529)) (Prims.of_int (58)))))
                   with
                   | true ->
                       (FStar_InteractiveHelpers_Base.print_dbg dbg a)
                         (FStar_Tactics_Types.decr_depth
                            (FStar_Tactics_Types.set_proofstate_range ps'
                               (FStar_Range.prims_to_fstar_range
                                  (Prims.mk_range
                                     "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                     (Prims.of_int (529)) (Prims.of_int (2))
                                     (Prims.of_int (529)) (Prims.of_int (58)))))))
              | FStar_Tactics_Result.Failed (e, ps') ->
                  FStar_Tactics_Result.Failed (e, ps')
        with
        | FStar_Tactics_Result.Success (a, ps') ->
            (match FStar_Tactics_Types.tracepoint
                     (FStar_Tactics_Types.set_proofstate_range ps'
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (530)) (Prims.of_int (2))
                              (Prims.of_int (536)) (Prims.of_int (8)))))
             with
             | true ->
                 ((match t with
                   | FStar_Reflection_Data.Tv_Let
                       (recf, attrs, bv, def, body) ->
                       (fun ps1 ->
                          match (FStar_InteractiveHelpers_Base.print_dbg dbg
                                   "The term is a let expression")
                                  (FStar_Tactics_Types.incr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps1
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (532))
                                              (Prims.of_int (4))
                                              (Prims.of_int (532))
                                              (Prims.of_int (48))))))
                          with
                          | FStar_Tactics_Result.Success (a1, ps'1) ->
                              (match FStar_Tactics_Types.tracepoint
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (533))
                                                (Prims.of_int (4))
                                                (Prims.of_int (533))
                                                (Prims.of_int (47)))))
                               with
                               | true ->
                                   (match (is_st_get dbg def)
                                            (FStar_Tactics_Types.incr_depth
                                               (FStar_Tactics_Types.set_proofstate_range
                                                  (FStar_Tactics_Types.decr_depth
                                                     (FStar_Tactics_Types.set_proofstate_range
                                                        ps'1
                                                        (FStar_Range.prims_to_fstar_range
                                                           (Prims.mk_range
                                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                              (Prims.of_int (533))
                                                              (Prims.of_int (4))
                                                              (Prims.of_int (533))
                                                              (Prims.of_int (47))))))
                                                  (FStar_Range.prims_to_fstar_range
                                                     (Prims.mk_range
                                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                        (Prims.of_int (533))
                                                        (Prims.of_int (7))
                                                        (Prims.of_int (533))
                                                        (Prims.of_int (24))))))
                                    with
                                    | FStar_Tactics_Result.Success (a2, ps'2)
                                        ->
                                        (match FStar_Tactics_Types.tracepoint
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps'2
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (533))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (533))
                                                          (Prims.of_int (47)))))
                                         with
                                         | true ->
                                             (if a2
                                              then
                                                (fun s ->
                                                   FStar_Tactics_Result.Success
                                                     ((FStar_Pervasives_Native.Some
                                                         bv), s))
                                              else
                                                (fun s ->
                                                   FStar_Tactics_Result.Success
                                                     (FStar_Pervasives_Native.None,
                                                       s)))
                                               (FStar_Tactics_Types.decr_depth
                                                  (FStar_Tactics_Types.set_proofstate_range
                                                     ps'2
                                                     (FStar_Range.prims_to_fstar_range
                                                        (Prims.mk_range
                                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                           (Prims.of_int (533))
                                                           (Prims.of_int (4))
                                                           (Prims.of_int (533))
                                                           (Prims.of_int (47)))))))
                                    | FStar_Tactics_Result.Failed (e, ps'2)
                                        ->
                                        FStar_Tactics_Result.Failed (e, ps'2)))
                          | FStar_Tactics_Result.Failed (e, ps'1) ->
                              FStar_Tactics_Result.Failed (e, ps'1))
                   | uu___ ->
                       (fun ps1 ->
                          match (FStar_InteractiveHelpers_Base.print_dbg dbg
                                   "The term is not a let expression")
                                  (FStar_Tactics_Types.incr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps1
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (535))
                                              (Prims.of_int (4))
                                              (Prims.of_int (535))
                                              (Prims.of_int (52))))))
                          with
                          | FStar_Tactics_Result.Success (a1, ps'1) ->
                              (match FStar_Tactics_Types.tracepoint
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (536))
                                                (Prims.of_int (4))
                                                (Prims.of_int (536))
                                                (Prims.of_int (8)))))
                               with
                               | true ->
                                   FStar_Tactics_Result.Success
                                     (FStar_Pervasives_Native.None,
                                       (FStar_Tactics_Types.decr_depth
                                          (FStar_Tactics_Types.set_proofstate_range
                                             ps'1
                                             (FStar_Range.prims_to_fstar_range
                                                (Prims.mk_range
                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                   (Prims.of_int (536))
                                                   (Prims.of_int (4))
                                                   (Prims.of_int (536))
                                                   (Prims.of_int (8))))))))
                          | FStar_Tactics_Result.Failed (e, ps'1) ->
                              FStar_Tactics_Result.Failed (e, ps'1))))
                   (FStar_Tactics_Types.decr_depth
                      (FStar_Tactics_Types.set_proofstate_range ps'
                         (FStar_Range.prims_to_fstar_range
                            (Prims.mk_range
                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                               (Prims.of_int (530)) (Prims.of_int (2))
                               (Prims.of_int (536)) (Prims.of_int (8)))))))
        | FStar_Tactics_Result.Failed (e, ps') ->
            FStar_Tactics_Result.Failed (e, ps')
let (term_has_effectful_comp :
  Prims.bool ->
    FStar_Reflection_Types.env ->
      FStar_Reflection_Types.term ->
        FStar_Tactics_Types.proofstate ->
          Prims.bool FStar_Pervasives_Native.option
            FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun e ->
      fun tm ->
        fun ps ->
          match (FStar_InteractiveHelpers_Base.print_dbg dbg
                   "[> term_has_effectful_comp")
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (548)) (Prims.of_int (2))
                              (Prims.of_int (548)) (Prims.of_int (44))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (549)) (Prims.of_int (2))
                                (Prims.of_int (556)) (Prims.of_int (8)))))
               with
               | true ->
                   (match (compute_effect_info dbg e tm)
                            (FStar_Tactics_Types.incr_depth
                               (FStar_Tactics_Types.set_proofstate_range
                                  (FStar_Tactics_Types.decr_depth
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps'
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (549))
                                              (Prims.of_int (2))
                                              (Prims.of_int (556))
                                              (Prims.of_int (8))))))
                                  (FStar_Range.prims_to_fstar_range
                                     (Prims.mk_range
                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                        (Prims.of_int (549))
                                        (Prims.of_int (18))
                                        (Prims.of_int (549))
                                        (Prims.of_int (46))))))
                    with
                    | FStar_Tactics_Result.Success (a1, ps'1) ->
                        (match FStar_Tactics_Types.tracepoint
                                 (FStar_Tactics_Types.set_proofstate_range
                                    ps'1
                                    (FStar_Range.prims_to_fstar_range
                                       (Prims.mk_range
                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                          (Prims.of_int (550))
                                          (Prims.of_int (2))
                                          (Prims.of_int (556))
                                          (Prims.of_int (8)))))
                         with
                         | true ->
                             ((match a1 with
                               | FStar_Pervasives_Native.Some einfo ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg
                                               (Prims.strcat "Effect type: "
                                                  (FStar_InteractiveHelpers_ExploreTerm.effect_type_to_string
                                                     einfo.ei_type)))
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (552))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (552))
                                                          (Prims.of_int (73))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (553))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (553))
                                                            (Prims.of_int (50)))))
                                           with
                                           | true ->
                                               FStar_Tactics_Result.Success
                                                 ((FStar_Pervasives_Native.Some
                                                     (Prims.op_Negation
                                                        (FStar_InteractiveHelpers_ExploreTerm.effect_type_is_pure
                                                           einfo.ei_type))),
                                                   (FStar_Tactics_Types.decr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps'2
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (553))
                                                               (Prims.of_int (4))
                                                               (Prims.of_int (553))
                                                               (Prims.of_int (50))))))))
                                      | FStar_Tactics_Result.Failed
                                          (e1, ps'2) ->
                                          FStar_Tactics_Result.Failed
                                            (e1, ps'2))
                               | FStar_Pervasives_Native.None ->
                                   (fun ps1 ->
                                      match (FStar_InteractiveHelpers_Base.print_dbg
                                               dbg
                                               "Could not compute effect info")
                                              (FStar_Tactics_Types.incr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps1
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (555))
                                                          (Prims.of_int (4))
                                                          (Prims.of_int (555))
                                                          (Prims.of_int (49))))))
                                      with
                                      | FStar_Tactics_Result.Success
                                          (a2, ps'2) ->
                                          (match FStar_Tactics_Types.tracepoint
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'2
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (556))
                                                            (Prims.of_int (4))
                                                            (Prims.of_int (556))
                                                            (Prims.of_int (8)))))
                                           with
                                           | true ->
                                               FStar_Tactics_Result.Success
                                                 (FStar_Pervasives_Native.None,
                                                   (FStar_Tactics_Types.decr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps'2
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (556))
                                                               (Prims.of_int (4))
                                                               (Prims.of_int (556))
                                                               (Prims.of_int (8))))))))
                                      | FStar_Tactics_Result.Failed
                                          (e1, ps'2) ->
                                          FStar_Tactics_Result.Failed
                                            (e1, ps'2))))
                               (FStar_Tactics_Types.decr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     ps'1
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (550))
                                           (Prims.of_int (2))
                                           (Prims.of_int (556))
                                           (Prims.of_int (8)))))))
                    | FStar_Tactics_Result.Failed (e1, ps'1) ->
                        FStar_Tactics_Result.Failed (e1, ps'1)))
          | FStar_Tactics_Result.Failed (e1, ps') ->
              FStar_Tactics_Result.Failed (e1, ps')
let (related_term_is_effectul :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      FStar_Reflection_Data.term_view ->
        FStar_Tactics_Types.proofstate ->
          Prims.bool FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge ->
      fun tv ->
        fun ps ->
          match FStar_Tactics_Types.tracepoint
                  (FStar_Tactics_Types.set_proofstate_range
                     (FStar_Tactics_Types.incr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (568)) (Prims.of_int (4))
                                 (Prims.of_int (568)) (Prims.of_int (55))))))
                     (FStar_Range.prims_to_fstar_range
                        (Prims.mk_range
                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                           (Prims.of_int (570)) (Prims.of_int (2))
                           (Prims.of_int (592)) (Prims.of_int (45)))))
          with
          | true ->
              ((match tv with
                | FStar_Reflection_Data.Tv_Var uu___ ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_BVar uu___ ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_FVar uu___ ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_App (hd, (a, qual)) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Abs (br, body) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Arrow (br, c0) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Type () ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Refine (bv, ref) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Const uu___ ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Uvar (uu___, uu___1) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_Let (recf, attrs, bv, def, body)
                    ->
                    (fun ps1 ->
                       match (term_has_effectful_comp dbg
                                ge.FStar_InteractiveHelpers_Base.env def)
                               (FStar_Tactics_Types.incr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     ps1
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (568))
                                           (Prims.of_int (4))
                                           (Prims.of_int (568))
                                           (Prims.of_int (41))))))
                       with
                       | FStar_Tactics_Result.Success (a, ps') ->
                           (match FStar_Tactics_Types.tracepoint
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps'
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (568))
                                             (Prims.of_int (4))
                                             (Prims.of_int (568))
                                             (Prims.of_int (55)))))
                            with
                            | true ->
                                FStar_Tactics_Result.Success
                                  ((a <> (FStar_Pervasives_Native.Some false)),
                                    (FStar_Tactics_Types.decr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (568))
                                                (Prims.of_int (4))
                                                (Prims.of_int (568))
                                                (Prims.of_int (55))))))))
                       | FStar_Tactics_Result.Failed (e, ps') ->
                           FStar_Tactics_Result.Failed (e, ps'))
                | FStar_Reflection_Data.Tv_Match
                    (scrutinee, _ret_opt, branches) ->
                    (fun ps1 ->
                       match (term_has_effectful_comp dbg
                                ge.FStar_InteractiveHelpers_Base.env
                                scrutinee)
                               (FStar_Tactics_Types.incr_depth
                                  (FStar_Tactics_Types.set_proofstate_range
                                     ps1
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (568))
                                           (Prims.of_int (4))
                                           (Prims.of_int (568))
                                           (Prims.of_int (41))))))
                       with
                       | FStar_Tactics_Result.Success (a, ps') ->
                           (match FStar_Tactics_Types.tracepoint
                                    (FStar_Tactics_Types.set_proofstate_range
                                       ps'
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (568))
                                             (Prims.of_int (4))
                                             (Prims.of_int (568))
                                             (Prims.of_int (55)))))
                            with
                            | true ->
                                FStar_Tactics_Result.Success
                                  ((a <> (FStar_Pervasives_Native.Some false)),
                                    (FStar_Tactics_Types.decr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (568))
                                                (Prims.of_int (4))
                                                (Prims.of_int (568))
                                                (Prims.of_int (55))))))))
                       | FStar_Tactics_Result.Failed (e, ps') ->
                           FStar_Tactics_Result.Failed (e, ps'))
                | FStar_Reflection_Data.Tv_AscribedT (e, ty, tac) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | FStar_Reflection_Data.Tv_AscribedC (e, c, tac) ->
                    (fun s -> FStar_Tactics_Result.Success (false, s))
                | uu___ -> (fun s -> FStar_Tactics_Result.Success (true, s))))
                (FStar_Tactics_Types.decr_depth
                   (FStar_Tactics_Types.set_proofstate_range
                      (FStar_Tactics_Types.incr_depth
                         (FStar_Tactics_Types.set_proofstate_range ps
                            (FStar_Range.prims_to_fstar_range
                               (Prims.mk_range
                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                  (Prims.of_int (568)) (Prims.of_int (4))
                                  (Prims.of_int (568)) (Prims.of_int (55))))))
                      (FStar_Range.prims_to_fstar_range
                         (Prims.mk_range
                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                            (Prims.of_int (570)) (Prims.of_int (2))
                            (Prims.of_int (592)) (Prims.of_int (45))))))
let rec (find_mem_in_related :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      FStar_Reflection_Data.term_view Prims.list ->
        FStar_Tactics_Types.proofstate ->
          FStar_Reflection_Types.bv FStar_Pervasives_Native.option
            FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge ->
      fun tms ->
        match tms with
        | [] ->
            (fun s ->
               FStar_Tactics_Result.Success (FStar_Pervasives_Native.None, s))
        | tv::tms' ->
            (fun ps ->
               match match match match (FStar_Tactics_Builtins.pack tv)
                                         (FStar_Tactics_Types.incr_depth
                                            (FStar_Tactics_Types.set_proofstate_range
                                               (FStar_Tactics_Types.incr_depth
                                                  (FStar_Tactics_Types.set_proofstate_range
                                                     (FStar_Tactics_Types.incr_depth
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           (FStar_Tactics_Types.incr_depth
                                                              (FStar_Tactics_Types.set_proofstate_range
                                                                 ps
                                                                 (FStar_Range.prims_to_fstar_range
                                                                    (
                                                                    Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (610))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (610))
                                                                    (Prims.of_int (67))))))
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (610))
                                                                 (Prims.of_int (18))
                                                                 (Prims.of_int (610))
                                                                 (Prims.of_int (67))))))
                                                     (FStar_Range.prims_to_fstar_range
                                                        (Prims.mk_range
                                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                           (Prims.of_int (610))
                                                           (Prims.of_int (49))
                                                           (Prims.of_int (610))
                                                           (Prims.of_int (66))))))
                                               (FStar_Range.prims_to_fstar_range
                                                  (Prims.mk_range
                                                     "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                     (Prims.of_int (609))
                                                     (Prims.of_int (4))
                                                     (Prims.of_int (609))
                                                     (Prims.of_int (6))))))
                                 with
                                 | FStar_Tactics_Result.Success (a, ps') ->
                                     (match FStar_Tactics_Types.tracepoint
                                              (FStar_Tactics_Types.set_proofstate_range
                                                 ps'
                                                 (FStar_Range.prims_to_fstar_range
                                                    (Prims.mk_range
                                                       "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                       (Prims.of_int (610))
                                                       (Prims.of_int (49))
                                                       (Prims.of_int (610))
                                                       (Prims.of_int (66)))))
                                      with
                                      | true ->
                                          FStar_Tactics_Result.Success
                                            ((FStar_Reflection_Builtins.term_to_string
                                                a),
                                              (FStar_Tactics_Types.decr_depth
                                                 (FStar_Tactics_Types.set_proofstate_range
                                                    ps'
                                                    (FStar_Range.prims_to_fstar_range
                                                       (Prims.mk_range
                                                          "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                          (Prims.of_int (610))
                                                          (Prims.of_int (49))
                                                          (Prims.of_int (610))
                                                          (Prims.of_int (66))))))))
                                 | FStar_Tactics_Result.Failed (e, ps') ->
                                     FStar_Tactics_Result.Failed (e, ps')
                           with
                           | FStar_Tactics_Result.Success (a, ps') ->
                               (match FStar_Tactics_Types.tracepoint
                                        (FStar_Tactics_Types.set_proofstate_range
                                           ps'
                                           (FStar_Range.prims_to_fstar_range
                                              (Prims.mk_range "prims.fst"
                                                 (Prims.of_int (603))
                                                 (Prims.of_int (19))
                                                 (Prims.of_int (603))
                                                 (Prims.of_int (31)))))
                                with
                                | true ->
                                    FStar_Tactics_Result.Success
                                      ((Prims.strcat
                                          "[> find_mem_in_related:\n" a),
                                        (FStar_Tactics_Types.decr_depth
                                           (FStar_Tactics_Types.set_proofstate_range
                                              ps'
                                              (FStar_Range.prims_to_fstar_range
                                                 (Prims.mk_range "prims.fst"
                                                    (Prims.of_int (603))
                                                    (Prims.of_int (19))
                                                    (Prims.of_int (603))
                                                    (Prims.of_int (31))))))))
                           | FStar_Tactics_Result.Failed (e, ps') ->
                               FStar_Tactics_Result.Failed (e, ps')
                     with
                     | FStar_Tactics_Result.Success (a, ps') ->
                         (match FStar_Tactics_Types.tracepoint
                                  (FStar_Tactics_Types.set_proofstate_range
                                     ps'
                                     (FStar_Range.prims_to_fstar_range
                                        (Prims.mk_range
                                           "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                           (Prims.of_int (610))
                                           (Prims.of_int (4))
                                           (Prims.of_int (610))
                                           (Prims.of_int (67)))))
                          with
                          | true ->
                              (FStar_InteractiveHelpers_Base.print_dbg dbg a)
                                (FStar_Tactics_Types.decr_depth
                                   (FStar_Tactics_Types.set_proofstate_range
                                      ps'
                                      (FStar_Range.prims_to_fstar_range
                                         (Prims.mk_range
                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                            (Prims.of_int (610))
                                            (Prims.of_int (4))
                                            (Prims.of_int (610))
                                            (Prims.of_int (67)))))))
                     | FStar_Tactics_Result.Failed (e, ps') ->
                         FStar_Tactics_Result.Failed (e, ps')
               with
               | FStar_Tactics_Result.Success (a, ps') ->
                   (match FStar_Tactics_Types.tracepoint
                            (FStar_Tactics_Types.set_proofstate_range ps'
                               (FStar_Range.prims_to_fstar_range
                                  (Prims.mk_range
                                     "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                     (Prims.of_int (611)) (Prims.of_int (4))
                                     (Prims.of_int (627)) (Prims.of_int (11)))))
                    with
                    | true ->
                        (match (is_let_st_get dbg tv)
                                 (FStar_Tactics_Types.incr_depth
                                    (FStar_Tactics_Types.set_proofstate_range
                                       (FStar_Tactics_Types.decr_depth
                                          (FStar_Tactics_Types.set_proofstate_range
                                             ps'
                                             (FStar_Range.prims_to_fstar_range
                                                (Prims.mk_range
                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                   (Prims.of_int (611))
                                                   (Prims.of_int (4))
                                                   (Prims.of_int (627))
                                                   (Prims.of_int (11))))))
                                       (FStar_Range.prims_to_fstar_range
                                          (Prims.mk_range
                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                             (Prims.of_int (611))
                                             (Prims.of_int (10))
                                             (Prims.of_int (611))
                                             (Prims.of_int (30))))))
                         with
                         | FStar_Tactics_Result.Success (a1, ps'1) ->
                             (match FStar_Tactics_Types.tracepoint
                                      (FStar_Tactics_Types.set_proofstate_range
                                         ps'1
                                         (FStar_Range.prims_to_fstar_range
                                            (Prims.mk_range
                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                               (Prims.of_int (611))
                                               (Prims.of_int (4))
                                               (Prims.of_int (627))
                                               (Prims.of_int (11)))))
                              with
                              | true ->
                                  ((match a1 with
                                    | FStar_Pervasives_Native.Some bv ->
                                        (fun ps1 ->
                                           match (FStar_InteractiveHelpers_Base.print_dbg
                                                    dbg
                                                    "Term is of the form `let x = FStar.HyperStack.ST.get ()`: success")
                                                   (FStar_Tactics_Types.incr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps1
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (613))
                                                               (Prims.of_int (6))
                                                               (Prims.of_int (613))
                                                               (Prims.of_int (87))))))
                                           with
                                           | FStar_Tactics_Result.Success
                                               (a2, ps'2) ->
                                               (match FStar_Tactics_Types.tracepoint
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'2
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (614))
                                                                 (Prims.of_int (6))
                                                                 (Prims.of_int (614))
                                                                 (Prims.of_int (13)))))
                                                with
                                                | true ->
                                                    FStar_Tactics_Result.Success
                                                      ((FStar_Pervasives_Native.Some
                                                          bv),
                                                        (FStar_Tactics_Types.decr_depth
                                                           (FStar_Tactics_Types.set_proofstate_range
                                                              ps'2
                                                              (FStar_Range.prims_to_fstar_range
                                                                 (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (614))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (614))
                                                                    (Prims.of_int (13))))))))
                                           | FStar_Tactics_Result.Failed
                                               (e, ps'2) ->
                                               FStar_Tactics_Result.Failed
                                                 (e, ps'2))
                                    | FStar_Pervasives_Native.None ->
                                        (fun ps1 ->
                                           match (FStar_InteractiveHelpers_Base.print_dbg
                                                    dbg
                                                    "Term is not of the form `let x = FStar.HyperStack.ST.get ()`: continuing")
                                                   (FStar_Tactics_Types.incr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         ps1
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (616))
                                                               (Prims.of_int (6))
                                                               (Prims.of_int (616))
                                                               (Prims.of_int (94))))))
                                           with
                                           | FStar_Tactics_Result.Success
                                               (a2, ps'2) ->
                                               (match FStar_Tactics_Types.tracepoint
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'2
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (617))
                                                                 (Prims.of_int (6))
                                                                 (Prims.of_int (627))
                                                                 (Prims.of_int (11)))))
                                                with
                                                | true ->
                                                    (match (related_term_is_effectul
                                                              dbg ge tv)
                                                             (FStar_Tactics_Types.incr_depth
                                                                (FStar_Tactics_Types.set_proofstate_range
                                                                   (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (617))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (627))
                                                                    (Prims.of_int (11))))))
                                                                   (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (617))
                                                                    (Prims.of_int (9))
                                                                    (Prims.of_int (617))
                                                                    (Prims.of_int (43))))))
                                                     with
                                                     | FStar_Tactics_Result.Success
                                                         (a3, ps'3) ->
                                                         (match FStar_Tactics_Types.tracepoint
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (617))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (627))
                                                                    (Prims.of_int (11)))))
                                                          with
                                                          | true ->
                                                              (if a3
                                                               then
                                                                 (fun ps2 ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Term is effectful: stopping here")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (620))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (620))
                                                                    (Prims.of_int (56))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (621))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (621))
                                                                    (Prims.of_int (12)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (621))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (621))
                                                                    (Prims.of_int (12))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))
                                                               else
                                                                 (fun ps2 ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Term is not effectful: continuing")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (625))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (625))
                                                                    (Prims.of_int (57))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (626))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (626))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (find_mem_in_related
                                                                    dbg ge
                                                                    tms')
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (626))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (626))
                                                                    (Prims.of_int (39)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))
                                                                (FStar_Tactics_Types.decr_depth
                                                                   (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (617))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (627))
                                                                    (Prims.of_int (11)))))))
                                                     | FStar_Tactics_Result.Failed
                                                         (e, ps'3) ->
                                                         FStar_Tactics_Result.Failed
                                                           (e, ps'3)))
                                           | FStar_Tactics_Result.Failed
                                               (e, ps'2) ->
                                               FStar_Tactics_Result.Failed
                                                 (e, ps'2))))
                                    (FStar_Tactics_Types.decr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps'1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (611))
                                                (Prims.of_int (4))
                                                (Prims.of_int (627))
                                                (Prims.of_int (11)))))))
                         | FStar_Tactics_Result.Failed (e, ps'1) ->
                             FStar_Tactics_Result.Failed (e, ps'1)))
               | FStar_Tactics_Result.Failed (e, ps') ->
                   FStar_Tactics_Result.Failed (e, ps'))
let rec (find_mem_in_children :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      FStar_Reflection_Types.term ->
        FStar_Tactics_Types.proofstate ->
          (FStar_InteractiveHelpers_Base.genv * FStar_Reflection_Types.bv
            FStar_Pervasives_Native.option) FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge ->
      fun child ->
        fun ps ->
          match (FStar_Tactics_Builtins.inspect child)
                  (FStar_Tactics_Types.incr_depth
                     (FStar_Tactics_Types.set_proofstate_range ps
                        (FStar_Range.prims_to_fstar_range
                           (Prims.mk_range
                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                              (Prims.of_int (640)) (Prims.of_int (8))
                              (Prims.of_int (640)) (Prims.of_int (21))))))
          with
          | FStar_Tactics_Result.Success (a, ps') ->
              (match FStar_Tactics_Types.tracepoint
                       (FStar_Tactics_Types.set_proofstate_range ps'
                          (FStar_Range.prims_to_fstar_range
                             (Prims.mk_range
                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                (Prims.of_int (640)) (Prims.of_int (2))
                                (Prims.of_int (647)) (Prims.of_int (17)))))
               with
               | true ->
                   ((match a with
                     | FStar_Reflection_Data.Tv_Let
                         (recf, attrs, bv, def, body) ->
                         (fun ps1 ->
                            match (is_st_get dbg def)
                                    (FStar_Tactics_Types.incr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps1
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (642))
                                                (Prims.of_int (7))
                                                (Prims.of_int (642))
                                                (Prims.of_int (24))))))
                            with
                            | FStar_Tactics_Result.Success (a1, ps'1) ->
                                (match FStar_Tactics_Types.tracepoint
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps'1
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (642))
                                                  (Prims.of_int (4))
                                                  (Prims.of_int (646))
                                                  (Prims.of_int (39)))))
                                 with
                                 | true ->
                                     (if a1
                                      then
                                        (fun s ->
                                           FStar_Tactics_Result.Success
                                             ((ge,
                                                (FStar_Pervasives_Native.Some
                                                   bv)), s))
                                      else
                                        (fun ps2 ->
                                           match match (term_has_effectful_comp
                                                          dbg
                                                          ge.FStar_InteractiveHelpers_Base.env
                                                          def)
                                                         (FStar_Tactics_Types.incr_depth
                                                            (FStar_Tactics_Types.set_proofstate_range
                                                               (FStar_Tactics_Types.incr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (64))))))
                                                               (FStar_Range.prims_to_fstar_range
                                                                  (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (50))))))
                                                 with
                                                 | FStar_Tactics_Result.Success
                                                     (a2, ps'2) ->
                                                     (match FStar_Tactics_Types.tracepoint
                                                              (FStar_Tactics_Types.set_proofstate_range
                                                                 ps'2
                                                                 (FStar_Range.prims_to_fstar_range
                                                                    (
                                                                    Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (64)))))
                                                      with
                                                      | true ->
                                                          FStar_Tactics_Result.Success
                                                            ((a2 <>
                                                                (FStar_Pervasives_Native.Some
                                                                   false)),
                                                              (FStar_Tactics_Types.decr_depth
                                                                 (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (
                                                                    FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (643))
                                                                    (Prims.of_int (64))))))))
                                                 | FStar_Tactics_Result.Failed
                                                     (e, ps'2) ->
                                                     FStar_Tactics_Result.Failed
                                                       (e, ps'2)
                                           with
                                           | FStar_Tactics_Result.Success
                                               (a2, ps'2) ->
                                               (match FStar_Tactics_Types.tracepoint
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'2
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (643))
                                                                 (Prims.of_int (9))
                                                                 (Prims.of_int (646))
                                                                 (Prims.of_int (39)))))
                                                with
                                                | true ->
                                                    (if a2
                                                     then
                                                       (fun s ->
                                                          FStar_Tactics_Result.Success
                                                            ((ge,
                                                               FStar_Pervasives_Native.None),
                                                              s))
                                                     else
                                                       (fun ps3 ->
                                                          match (FStar_InteractiveHelpers_Base.genv_push_bv
                                                                   ge bv
                                                                   false
                                                                   FStar_Pervasives_Native.None)
                                                                  (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (645))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (645))
                                                                    (Prims.of_int (45))))))
                                                          with
                                                          | FStar_Tactics_Result.Success
                                                              (a3, ps'3) ->
                                                              (match 
                                                                 FStar_Tactics_Types.tracepoint
                                                                   (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (646))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (646))
                                                                    (Prims.of_int (39)))))
                                                               with
                                                               | true ->
                                                                   (find_mem_in_children
                                                                    dbg a3
                                                                    body)
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (646))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (646))
                                                                    (Prims.of_int (39)))))))
                                                          | FStar_Tactics_Result.Failed
                                                              (e, ps'3) ->
                                                              FStar_Tactics_Result.Failed
                                                                (e, ps'3)))
                                                      (FStar_Tactics_Types.decr_depth
                                                         (FStar_Tactics_Types.set_proofstate_range
                                                            ps'2
                                                            (FStar_Range.prims_to_fstar_range
                                                               (Prims.mk_range
                                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                  (Prims.of_int (643))
                                                                  (Prims.of_int (9))
                                                                  (Prims.of_int (646))
                                                                  (Prims.of_int (39)))))))
                                           | FStar_Tactics_Result.Failed
                                               (e, ps'2) ->
                                               FStar_Tactics_Result.Failed
                                                 (e, ps'2)))
                                       (FStar_Tactics_Types.decr_depth
                                          (FStar_Tactics_Types.set_proofstate_range
                                             ps'1
                                             (FStar_Range.prims_to_fstar_range
                                                (Prims.mk_range
                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                   (Prims.of_int (642))
                                                   (Prims.of_int (4))
                                                   (Prims.of_int (646))
                                                   (Prims.of_int (39)))))))
                            | FStar_Tactics_Result.Failed (e, ps'1) ->
                                FStar_Tactics_Result.Failed (e, ps'1))
                     | uu___ ->
                         (fun s ->
                            FStar_Tactics_Result.Success
                              ((ge, FStar_Pervasives_Native.None), s))))
                     (FStar_Tactics_Types.decr_depth
                        (FStar_Tactics_Types.set_proofstate_range ps'
                           (FStar_Range.prims_to_fstar_range
                              (Prims.mk_range
                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                 (Prims.of_int (640)) (Prims.of_int (2))
                                 (Prims.of_int (647)) (Prims.of_int (17)))))))
          | FStar_Tactics_Result.Failed (e, ps') ->
              FStar_Tactics_Result.Failed (e, ps')
let (pre_post_to_propositions :
  Prims.bool ->
    FStar_InteractiveHelpers_Base.genv ->
      FStar_InteractiveHelpers_ExploreTerm.effect_type ->
        FStar_Reflection_Types.term ->
          FStar_Reflection_Types.binder FStar_Pervasives_Native.option ->
            FStar_InteractiveHelpers_ExploreTerm.type_info ->
              FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
                FStar_Reflection_Types.term FStar_Pervasives_Native.option ->
                  FStar_Reflection_Data.term_view Prims.list ->
                    FStar_Reflection_Data.term_view Prims.list ->
                      FStar_Tactics_Types.proofstate ->
                        (FStar_InteractiveHelpers_Base.genv *
                          FStar_InteractiveHelpers_Propositions.proposition
                          FStar_Pervasives_Native.option *
                          FStar_InteractiveHelpers_Propositions.proposition
                          FStar_Pervasives_Native.option)
                          FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun ge0 ->
      fun etype ->
        fun v ->
          fun ret_abs_binder ->
            fun ret_type ->
              fun opt_pre ->
                fun opt_post ->
                  fun parents ->
                    fun children ->
                      fun ps ->
                        match (FStar_InteractiveHelpers_Base.print_dbg dbg
                                 "[> pre_post_to_propositions: begin")
                                (FStar_Tactics_Types.incr_depth
                                   (FStar_Tactics_Types.set_proofstate_range
                                      ps
                                      (FStar_Range.prims_to_fstar_range
                                         (Prims.mk_range
                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                            (Prims.of_int (665))
                                            (Prims.of_int (2))
                                            (Prims.of_int (665))
                                            (Prims.of_int (52))))))
                        with
                        | FStar_Tactics_Result.Success (a, ps') ->
                            (match FStar_Tactics_Types.tracepoint
                                     (FStar_Tactics_Types.set_proofstate_range
                                        ps'
                                        (FStar_Range.prims_to_fstar_range
                                           (Prims.mk_range
                                              "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                              (Prims.of_int (666))
                                              (Prims.of_int (2))
                                              (Prims.of_int (743))
                                              (Prims.of_int (26)))))
                             with
                             | true ->
                                 (match (FStar_InteractiveHelpers_Base.print_dbg
                                           dbg
                                           (Prims.strcat
                                              "- uninstantiated pre: "
                                              (FStar_InteractiveHelpers_Base.option_to_string
                                                 FStar_Reflection_Builtins.term_to_string
                                                 opt_pre)))
                                          (FStar_Tactics_Types.incr_depth
                                             (FStar_Tactics_Types.set_proofstate_range
                                                (FStar_Tactics_Types.decr_depth
                                                   (FStar_Tactics_Types.set_proofstate_range
                                                      ps'
                                                      (FStar_Range.prims_to_fstar_range
                                                         (Prims.mk_range
                                                            "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                            (Prims.of_int (666))
                                                            (Prims.of_int (2))
                                                            (Prims.of_int (743))
                                                            (Prims.of_int (26))))))
                                                (FStar_Range.prims_to_fstar_range
                                                   (Prims.mk_range
                                                      "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                      (Prims.of_int (666))
                                                      (Prims.of_int (2))
                                                      (Prims.of_int (666))
                                                      (Prims.of_int (84))))))
                                  with
                                  | FStar_Tactics_Result.Success (a1, ps'1)
                                      ->
                                      (match FStar_Tactics_Types.tracepoint
                                               (FStar_Tactics_Types.set_proofstate_range
                                                  ps'1
                                                  (FStar_Range.prims_to_fstar_range
                                                     (Prims.mk_range
                                                        "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                        (Prims.of_int (667))
                                                        (Prims.of_int (2))
                                                        (Prims.of_int (743))
                                                        (Prims.of_int (26)))))
                                       with
                                       | true ->
                                           (match (FStar_InteractiveHelpers_Base.print_dbg
                                                     dbg
                                                     (Prims.strcat
                                                        "- uninstantiated post: "
                                                        (FStar_InteractiveHelpers_Base.option_to_string
                                                           FStar_Reflection_Builtins.term_to_string
                                                           opt_post)))
                                                    (FStar_Tactics_Types.incr_depth
                                                       (FStar_Tactics_Types.set_proofstate_range
                                                          (FStar_Tactics_Types.decr_depth
                                                             (FStar_Tactics_Types.set_proofstate_range
                                                                ps'1
                                                                (FStar_Range.prims_to_fstar_range
                                                                   (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (667))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))
                                                          (FStar_Range.prims_to_fstar_range
                                                             (Prims.mk_range
                                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                (Prims.of_int (667))
                                                                (Prims.of_int (2))
                                                                (Prims.of_int (667))
                                                                (Prims.of_int (86))))))
                                            with
                                            | FStar_Tactics_Result.Success
                                                (a2, ps'2) ->
                                                (match FStar_Tactics_Types.tracepoint
                                                         (FStar_Tactics_Types.set_proofstate_range
                                                            ps'2
                                                            (FStar_Range.prims_to_fstar_range
                                                               (Prims.mk_range
                                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                  (Prims.of_int (668))
                                                                  (Prims.of_int (2))
                                                                  (Prims.of_int (743))
                                                                  (Prims.of_int (26)))))
                                                 with
                                                 | true ->
                                                     (match FStar_Tactics_Types.tracepoint
                                                              (FStar_Tactics_Types.set_proofstate_range
                                                                 (FStar_Tactics_Types.incr_depth
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (668))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (668))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (668))
                                                                    (Prims.of_int (66))))))
                                                                 (FStar_Range.prims_to_fstar_range
                                                                    (
                                                                    Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (670))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26)))))
                                                      with
                                                      | true ->
                                                          (match (match etype
                                                                  with
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_Lemma
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_Lemma")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (673))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (673))
                                                                    (Prims.of_int (29))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (674))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (674))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([
                                                                    FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_Const
                                                                    FStar_Reflection_Data.C_Unit)],
                                                                    [])),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (674))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (674))
                                                                    (Prims.of_int (34))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_Total
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_Total/E_GTotal")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (676))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (676))
                                                                    (Prims.of_int (38))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (29)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([], [])),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (29))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_GTotal
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_Total/E_GTotal")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (676))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (676))
                                                                    (Prims.of_int (38))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (29)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([], [])),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (677))
                                                                    (Prims.of_int (29))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_PURE
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_PURE/E_Pure")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (679))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (679))
                                                                    (Prims.of_int (35))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (31)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([v],
                                                                    ((match ret_abs_binder
                                                                    with
                                                                    | FStar_Pervasives_Native.None
                                                                    -> []
                                                                    | FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b])))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (31))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_Pure
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_PURE/E_Pure")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (679))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (679))
                                                                    (Prims.of_int (35))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (31)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([v],
                                                                    ((match ret_abs_binder
                                                                    with
                                                                    | FStar_Pervasives_Native.None
                                                                    -> []
                                                                    | FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b])))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (680))
                                                                    (Prims.of_int (31))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_Stack
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_Stack/E_ST")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (682))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (682))
                                                                    (Prims.of_int (34))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Looking for the initial state in the context")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (66))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (find_mem_in_related
                                                                    dbg ge0
                                                                    parents)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (54))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Looking for the final state in the context")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (64))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (find_mem_in_related
                                                                    dbg ge0
                                                                    children)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (55))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a7,
                                                                    ps'7) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (689))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (689))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (690))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (692))
                                                                    (Prims.of_int (59))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (match a5
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    bv ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_Var
                                                                    bv))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (37))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a8,
                                                                    (FStar_Reflection_Derived.mk_binder
                                                                    bv), ge0),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8))
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    ->
                                                                    FStar_InteractiveHelpers_Base.genv_push_fresh_var
                                                                    ge0
                                                                    "__h0_"
                                                                    (FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_FVar
                                                                    (FStar_Reflection_Builtins.pack_fv
                                                                    ["FStar";
                                                                    "Monotonic";
                                                                    "HyperStack";
                                                                    "mem"]))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (689))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (690))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (692))
                                                                    (Prims.of_int (59))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (63))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a8
                                                                    with
                                                                    | (h1,
                                                                    b1, ge1)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (match a7
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    bv ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_Var
                                                                    bv))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (37))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a9,
                                                                    (FStar_Reflection_Derived.mk_binder
                                                                    bv), ge1),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9))
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    ->
                                                                    FStar_InteractiveHelpers_Base.genv_push_fresh_var
                                                                    ge1
                                                                    "__h1_"
                                                                    (FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_FVar
                                                                    (FStar_Reflection_Builtins.pack_fv
                                                                    ["FStar";
                                                                    "Monotonic";
                                                                    "HyperStack";
                                                                    "mem"]))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (63))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (((
                                                                    match a9
                                                                    with
                                                                    | 
                                                                    (h2, b2,
                                                                    ge2) ->
                                                                    (ge2,
                                                                    ([h1],
                                                                    [b1]),
                                                                    ([h1;
                                                                    v;
                                                                    h2],
                                                                    (FStar_List_Tot_Base.flatten
                                                                    [
                                                                    [b1];
                                                                    (
                                                                    match ret_abs_binder
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    -> []
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b]);
                                                                    [b2]]))))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_ST
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "E_Stack/E_ST")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (682))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (682))
                                                                    (Prims.of_int (34))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Looking for the initial state in the context")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (684))
                                                                    (Prims.of_int (66))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (find_mem_in_related
                                                                    dbg ge0
                                                                    parents)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (685))
                                                                    (Prims.of_int (54))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Looking for the final state in the context")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (686))
                                                                    (Prims.of_int (64))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (find_mem_in_related
                                                                    dbg ge0
                                                                    children)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (687))
                                                                    (Prims.of_int (55))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a7,
                                                                    ps'7) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (689))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (689))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (690))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (692))
                                                                    (Prims.of_int (59))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (match a5
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    bv ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_Var
                                                                    bv))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (37))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a8,
                                                                    (FStar_Reflection_Derived.mk_binder
                                                                    bv), ge0),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8))
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    ->
                                                                    FStar_InteractiveHelpers_Base.genv_push_fresh_var
                                                                    ge0
                                                                    "__h0_"
                                                                    (FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_FVar
                                                                    (FStar_Reflection_Builtins.pack_fv
                                                                    ["FStar";
                                                                    "Monotonic";
                                                                    "HyperStack";
                                                                    "mem"]))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (689))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (690))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (692))
                                                                    (Prims.of_int (59))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (63))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a8
                                                                    with
                                                                    | (h1,
                                                                    b1, ge1)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (match a7
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    bv ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_Var
                                                                    bv))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (37))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a9,
                                                                    (FStar_Reflection_Derived.mk_binder
                                                                    bv), ge1),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (21))
                                                                    (Prims.of_int (691))
                                                                    (Prims.of_int (55))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9))
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    ->
                                                                    FStar_InteractiveHelpers_Base.genv_push_fresh_var
                                                                    ge1
                                                                    "__h1_"
                                                                    (FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_FVar
                                                                    (FStar_Reflection_Builtins.pack_fv
                                                                    ["FStar";
                                                                    "Monotonic";
                                                                    "HyperStack";
                                                                    "mem"]))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (63))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (((
                                                                    match a9
                                                                    with
                                                                    | 
                                                                    (h2, b2,
                                                                    ge2) ->
                                                                    (ge2,
                                                                    ([h1],
                                                                    [b1]),
                                                                    ([h1;
                                                                    v;
                                                                    h2],
                                                                    (FStar_List_Tot_Base.flatten
                                                                    [
                                                                    [b1];
                                                                    (
                                                                    match ret_abs_binder
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    -> []
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b]);
                                                                    [b2]]))))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (695))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (694))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (696))
                                                                    (Prims.of_int (76)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))
                                                                  | FStar_InteractiveHelpers_ExploreTerm.E_Unknown
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (check_opt_pre_post_type
                                                                    dbg
                                                                    ge0.FStar_InteractiveHelpers_Base.env
                                                                    opt_pre
                                                                    ret_type.FStar_InteractiveHelpers_ExploreTerm.ty
                                                                    opt_post)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (704))
                                                                    (Prims.of_int (20))
                                                                    (Prims.of_int (704))
                                                                    (Prims.of_int (84))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (705))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (724))
                                                                    (Prims.of_int (31)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a3
                                                                    with
                                                                    | FStar_Pervasives_Native.Some
                                                                    (PP_Pure)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Pure")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (707))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (707))
                                                                    (Prims.of_int (31))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (709))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (709))
                                                                    (Prims.of_int (33)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([v],
                                                                    ((match ret_abs_binder
                                                                    with
                                                                    | FStar_Pervasives_Native.None
                                                                    -> []
                                                                    | FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b])))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (709))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (709))
                                                                    (Prims.of_int (33))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))
                                                                    | FStar_Pervasives_Native.Some
                                                                    (PP_State
                                                                    state_type)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_State")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (711))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (711))
                                                                    (Prims.of_int (32))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (713))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (714))
                                                                    (Prims.of_int (78)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.genv_push_two_fresh_vars
                                                                    ge0 "__s"
                                                                    state_type)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (713))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (714))
                                                                    (Prims.of_int (78))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (713))
                                                                    (Prims.of_int (34))
                                                                    (Prims.of_int (713))
                                                                    (Prims.of_int (79))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (713))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (714))
                                                                    (Prims.of_int (78)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (((
                                                                    match a5
                                                                    with
                                                                    | 
                                                                    (s1, b1,
                                                                    s2, b2,
                                                                    ge1) ->
                                                                    (ge1,
                                                                    ([s1],
                                                                    [b1]),
                                                                    ([s1;
                                                                    v;
                                                                    s2],
                                                                    (FStar_List_Tot_Base.flatten
                                                                    [
                                                                    [b1];
                                                                    (
                                                                    match ret_abs_binder
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    -> []
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b]);
                                                                    [b2]]))))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (713))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (714))
                                                                    (Prims.of_int (78))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))
                                                                    | FStar_Pervasives_Native.Some
                                                                    (PP_Unknown)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "PP_Unknown")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (716))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (716))
                                                                    (Prims.of_int (34))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (718))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (720))
                                                                    (Prims.of_int (67)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (introduce_variables_for_opt_abs
                                                                    ge0
                                                                    opt_pre)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (718))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (720))
                                                                    (Prims.of_int (67))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (718))
                                                                    (Prims.of_int (43))
                                                                    (Prims.of_int (718))
                                                                    (Prims.of_int (86))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (718))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (720))
                                                                    (Prims.of_int (67)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a5
                                                                    with
                                                                    | (pre_values,
                                                                    pre_binders,
                                                                    ge1) ->
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (introduce_variables_for_opt_abs
                                                                    ge1
                                                                    opt_post)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (719))
                                                                    (Prims.of_int (45))
                                                                    (Prims.of_int (719))
                                                                    (Prims.of_int (89))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (719))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (720))
                                                                    (Prims.of_int (67)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (((
                                                                    match a6
                                                                    with
                                                                    | 
                                                                    (post_values,
                                                                    post_binders,
                                                                    ge11) ->
                                                                    (ge11,
                                                                    (pre_values,
                                                                    pre_binders),
                                                                    (post_values,
                                                                    post_binders)))),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (719))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (720))
                                                                    (Prims.of_int (67))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (718))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (720))
                                                                    (Prims.of_int (67)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))
                                                                    | uu___
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "No pre and no post")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (722))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (722))
                                                                    (Prims.of_int (42))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (724))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (724))
                                                                    (Prims.of_int (31)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge0,
                                                                    ([], []),
                                                                    ([], [])),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (724))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (724))
                                                                    (Prims.of_int (31))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (705))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (724))
                                                                    (Prims.of_int (31)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)))
                                                                   (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (668))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (668))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (668))
                                                                    (Prims.of_int (66))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (670))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (671))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (725))
                                                                    (Prims.of_int (9))))))
                                                           with
                                                           | FStar_Tactics_Result.Success
                                                               (a3, ps'3) ->
                                                               (match 
                                                                  FStar_Tactics_Types.tracepoint
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (670))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26)))))
                                                                with
                                                                | true ->
                                                                    ((match a3
                                                                    with
                                                                    | (ge3,
                                                                    (pre_values,
                                                                    pre_binders),
                                                                    (post_values,
                                                                    post_binders))
                                                                    ->
                                                                    (fun ps1
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.opt_mk_app_norm
                                                                    ge3.FStar_InteractiveHelpers_Base.env
                                                                    opt_pre
                                                                    pre_values)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (729))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (729))
                                                                    (Prims.of_int (59))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (734))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_Tactics_Derived.try_with
                                                                    (fun
                                                                    uu___ ->
                                                                    match ()
                                                                    with
                                                                    | 
                                                                    () ->
                                                                    FStar_InteractiveHelpers_Base.opt_mk_app_norm
                                                                    ge3.FStar_InteractiveHelpers_Base.env
                                                                    opt_post
                                                                    post_values)
                                                                    (fun
                                                                    uu___ ->
                                                                    fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Dropping a postcondition because of incoherent typing")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (738))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (738))
                                                                    (Prims.of_int (75))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (739))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (739))
                                                                    (Prims.of_int (10)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (739))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (739))
                                                                    (Prims.of_int (10))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (734))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (735))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (739))
                                                                    (Prims.of_int (10))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (742))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "[> pre_post_to_propositions: end")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (742))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (742))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (742))
                                                                    (Prims.of_int (50))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge3,
                                                                    a4, a5),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (670))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (743))
                                                                    (Prims.of_int (26)))))))
                                                           | FStar_Tactics_Result.Failed
                                                               (e, ps'3) ->
                                                               FStar_Tactics_Result.Failed
                                                                 (e, ps'3))))
                                            | FStar_Tactics_Result.Failed
                                                (e, ps'2) ->
                                                FStar_Tactics_Result.Failed
                                                  (e, ps'2)))
                                  | FStar_Tactics_Result.Failed (e, ps'1) ->
                                      FStar_Tactics_Result.Failed (e, ps'1)))
                        | FStar_Tactics_Result.Failed (e, ps') ->
                            FStar_Tactics_Result.Failed (e, ps')
let (eterm_info_to_assertions :
  Prims.bool ->
    Prims.bool ->
      Prims.bool ->
        FStar_InteractiveHelpers_Base.genv ->
          FStar_Reflection_Types.term ->
            Prims.bool ->
              Prims.bool ->
                eterm_info ->
                  FStar_Reflection_Types.term FStar_Pervasives_Native.option
                    ->
                    FStar_InteractiveHelpers_ExploreTerm.typ_or_comp
                      FStar_Pervasives_Native.option ->
                      FStar_Reflection_Data.term_view Prims.list ->
                        FStar_Reflection_Data.term_view Prims.list ->
                          FStar_Tactics_Types.proofstate ->
                            (FStar_InteractiveHelpers_Base.genv *
                              FStar_InteractiveHelpers_Propositions.assertions)
                              FStar_Tactics_Result.__result)
  =
  fun dbg ->
    fun with_gpre ->
      fun with_gpost ->
        fun ge ->
          fun t ->
            fun is_let ->
              fun is_assert ->
                fun info ->
                  fun bind_var ->
                    fun opt_c ->
                      fun parents ->
                        fun children ->
                          fun ps ->
                            match (FStar_InteractiveHelpers_Base.print_dbg
                                     dbg "[> eterm_info_to_assertions")
                                    (FStar_Tactics_Types.incr_depth
                                       (FStar_Tactics_Types.set_proofstate_range
                                          ps
                                          (FStar_Range.prims_to_fstar_range
                                             (Prims.mk_range
                                                "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                (Prims.of_int (767))
                                                (Prims.of_int (2))
                                                (Prims.of_int (767))
                                                (Prims.of_int (45))))))
                            with
                            | FStar_Tactics_Result.Success (a, ps') ->
                                (match FStar_Tactics_Types.tracepoint
                                         (FStar_Tactics_Types.set_proofstate_range
                                            ps'
                                            (FStar_Range.prims_to_fstar_range
                                               (Prims.mk_range
                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                  (Prims.of_int (772))
                                                  (Prims.of_int (2))
                                                  (Prims.of_int (963))
                                                  (Prims.of_int (7)))))
                                 with
                                 | true ->
                                     (match FStar_Tactics_Types.tracepoint
                                              (FStar_Tactics_Types.set_proofstate_range
                                                 (FStar_Tactics_Types.incr_depth
                                                    (FStar_Tactics_Types.set_proofstate_range
                                                       (FStar_Tactics_Types.decr_depth
                                                          (FStar_Tactics_Types.set_proofstate_range
                                                             ps'
                                                             (FStar_Range.prims_to_fstar_range
                                                                (Prims.mk_range
                                                                   "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                   (Prims.of_int (772))
                                                                   (Prims.of_int (2))
                                                                   (Prims.of_int (963))
                                                                   (Prims.of_int (7))))))
                                                       (FStar_Range.prims_to_fstar_range
                                                          (Prims.mk_range
                                                             "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                             (Prims.of_int (772))
                                                             (Prims.of_int (14))
                                                             (Prims.of_int (772))
                                                             (Prims.of_int (24))))))
                                                 (FStar_Range.prims_to_fstar_range
                                                    (Prims.mk_range
                                                       "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                       (Prims.of_int (773))
                                                       (Prims.of_int (2))
                                                       (Prims.of_int (963))
                                                       (Prims.of_int (7)))))
                                      with
                                      | true ->
                                          (match (match bind_var with
                                                  | FStar_Pervasives_Native.Some
                                                      v ->
                                                      (fun s ->
                                                         FStar_Tactics_Result.Success
                                                           ((ge, v,
                                                              FStar_Pervasives_Native.None),
                                                             s))
                                                  | FStar_Pervasives_Native.None
                                                      ->
                                                      if
                                                        effect_type_is_stateful
                                                          (info.einfo).ei_type
                                                      then
                                                        (fun ps1 ->
                                                           match (FStar_InteractiveHelpers_ExploreTerm.is_unit_type
                                                                    ((info.einfo).ei_ret_type).FStar_InteractiveHelpers_ExploreTerm.ty)
                                                                   (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (783))
                                                                    (Prims.of_int (11))
                                                                    (Prims.of_int (783))
                                                                    (Prims.of_int (44))))))
                                                           with
                                                           | FStar_Tactics_Result.Success
                                                               (a1, ps'1) ->
                                                               (match 
                                                                  FStar_Tactics_Types.tracepoint
                                                                    (
                                                                    FStar_Tactics_Types.set_proofstate_range
                                                                    ps'1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (783))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53)))))
                                                                with
                                                                | true ->
                                                                    (if a1
                                                                    then
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge,
                                                                    (FStar_Reflection_Builtins.pack_ln
                                                                    (FStar_Reflection_Data.Tv_Const
                                                                    FStar_Reflection_Data.C_Unit)),
                                                                    FStar_Pervasives_Native.None),
                                                                    s))
                                                                    else
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.fresh_binder
                                                                    ge.FStar_InteractiveHelpers_Base.env
                                                                    "__ret"
                                                                    ((info.einfo).ei_ret_type).FStar_InteractiveHelpers_ExploreTerm.ty)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (786))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (786))
                                                                    (Prims.of_int (66))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a2,
                                                                    ps'2) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (33))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (788))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_Var
                                                                    (FStar_Reflection_Derived.bv_of_binder
                                                                    a2)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (787))
                                                                    (Prims.of_int (33))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (788))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (788))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (788))
                                                                    (Prims.of_int (35))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.genv_push_binder
                                                                    ge a2
                                                                    true
                                                                    FStar_Pervasives_Native.None)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (41))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a4, a3,
                                                                    (FStar_Pervasives_Native.Some
                                                                    a2)),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'2)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'2)))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (783))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (789))
                                                                    (Prims.of_int (53)))))))
                                                           | FStar_Tactics_Result.Failed
                                                               (e, ps'1) ->
                                                               FStar_Tactics_Result.Failed
                                                                 (e, ps'1))
                                                      else
                                                        (fun s ->
                                                           FStar_Tactics_Result.Success
                                                             ((ge, t,
                                                                FStar_Pervasives_Native.None),
                                                               s)))
                                                   (FStar_Tactics_Types.incr_depth
                                                      (FStar_Tactics_Types.set_proofstate_range
                                                         (FStar_Tactics_Types.decr_depth
                                                            (FStar_Tactics_Types.set_proofstate_range
                                                               (FStar_Tactics_Types.incr_depth
                                                                  (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (772))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (772))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (772))
                                                                    (Prims.of_int (24))))))
                                                               (FStar_Range.prims_to_fstar_range
                                                                  (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (773))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                         (FStar_Range.prims_to_fstar_range
                                                            (Prims.mk_range
                                                               "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                               (Prims.of_int (774))
                                                               (Prims.of_int (4))
                                                               (Prims.of_int (790))
                                                               (Prims.of_int (22))))))
                                           with
                                           | FStar_Tactics_Result.Success
                                               (a1, ps'1) ->
                                               (match FStar_Tactics_Types.tracepoint
                                                        (FStar_Tactics_Types.set_proofstate_range
                                                           ps'1
                                                           (FStar_Range.prims_to_fstar_range
                                                              (Prims.mk_range
                                                                 "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                 (Prims.of_int (773))
                                                                 (Prims.of_int (2))
                                                                 (Prims.of_int (963))
                                                                 (Prims.of_int (7)))))
                                                with
                                                | true ->
                                                    ((match a1 with
                                                      | (ge0, v, opt_b) ->
                                                          (fun ps1 ->
                                                             match FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (793))
                                                                    (Prims.of_int (7))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (793))
                                                                    (Prims.of_int (7))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))
                                                             with
                                                             | true ->
                                                                 (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "> Instantiating local pre/post")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps1
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (793))
                                                                    (Prims.of_int (7))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (793))
                                                                    (Prims.of_int (7))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (793))
                                                                    (Prims.of_int (7))
                                                                    (Prims.of_int (793))
                                                                    (Prims.of_int (53))))))
                                                                  with
                                                                  | FStar_Tactics_Result.Success
                                                                    (a2,
                                                                    ps'2) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (794))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (pre_post_to_propositions
                                                                    dbg ge0
                                                                    (info.einfo).ei_type
                                                                    v opt_b
                                                                    (info.einfo).ei_ret_type
                                                                    (info.einfo).ei_pre
                                                                    (info.einfo).ei_post
                                                                    parents
                                                                    children)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (794))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (795))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (796))
                                                                    (Prims.of_int (72))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a3,
                                                                    ps'3) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (794))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a3
                                                                    with
                                                                    | (ge1,
                                                                    pre_prop,
                                                                    post_prop)
                                                                    ->
                                                                    (fun ps2
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- pre prop: "
                                                                    (FStar_InteractiveHelpers_Base.option_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    pre_prop)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps2
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (797))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (797))
                                                                    (Prims.of_int (75))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a4,
                                                                    ps'4) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (798))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- post prop: "
                                                                    (FStar_InteractiveHelpers_Base.option_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    post_prop)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (798))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (798))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (798))
                                                                    (Prims.of_int (77))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a5,
                                                                    ps'5) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (802))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (if
                                                                    is_assert
                                                                    then
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "The term is an assert: only keep the postcondition")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (804))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (804))
                                                                    (Prims.of_int (70))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (805))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (805))
                                                                    (Prims.of_int (53)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge1,
                                                                    {
                                                                    FStar_InteractiveHelpers_Propositions.pres
                                                                    =
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    post_prop
                                                                    []);
                                                                    FStar_InteractiveHelpers_Propositions.posts
                                                                    = []
                                                                    }),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (805))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (805))
                                                                    (Prims.of_int (53))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6))
                                                                    else
                                                                    (fun ps3
                                                                    ->
                                                                    match 
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (813))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (936))
                                                                    (Prims.of_int (18))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (813))
                                                                    (Prims.of_int (29))
                                                                    (Prims.of_int (813))
                                                                    (Prims.of_int (70))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (814))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (935))
                                                                    (Prims.of_int (31)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match 
                                                                    (opt_c,
                                                                    (with_gpre
                                                                    ||
                                                                    ((Prims.op_Negation
                                                                    is_let)
                                                                    &&
                                                                    with_gpost)))
                                                                    with
                                                                    | (FStar_Pervasives_Native.Some
                                                                    c, true)
                                                                    ->
                                                                    (fun ps4
                                                                    ->
                                                                    match 
                                                                    (typ_or_comp_to_effect_info
                                                                    dbg ge1 c)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (816))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (816))
                                                                    (Prims.of_int (53))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (817))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- target effect: "
                                                                    (effect_info_to_string
                                                                    a6)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (817))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (817))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (817))
                                                                    (Prims.of_int (70))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a7,
                                                                    ps'7) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (818))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- global unfilt. pre: "
                                                                    (FStar_InteractiveHelpers_Base.option_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    a6.ei_pre)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (818))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (818))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (818))
                                                                    (Prims.of_int (92))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (819))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- global unfilt. post: "
                                                                    (FStar_InteractiveHelpers_Base.option_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    a6.ei_post)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (819))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (819))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (819))
                                                                    (Prims.of_int (94))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (822))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (if
                                                                    with_gpre
                                                                    then
                                                                    fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Generating assertions from the global parameters' types")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (826))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (826))
                                                                    (Prims.of_int (83))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a10,
                                                                    ps'10) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (827))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "Current genv:\n"
                                                                    (FStar_InteractiveHelpers_Base.genv_to_string
                                                                    ge1)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (827))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (827))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (827))
                                                                    (Prims.of_int (66))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a11,
                                                                    ps'11) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (831))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (831))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (832))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (832))
                                                                    (Prims.of_int (91))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (833))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_Tactics_Util.iteri
                                                                    (fun i ->
                                                                    fun
                                                                    uu___1 ->
                                                                    match uu___1
                                                                    with
                                                                    | 
                                                                    (b,
                                                                    uu___2)
                                                                    ->
                                                                    FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "Global parameter "
                                                                    (Prims.strcat
                                                                    (Prims.string_of_int
                                                                    i)
                                                                    (Prims.strcat
                                                                    ": "
                                                                    (FStar_Reflection_Derived.binder_to_string
                                                                    b)))))
                                                                    (FStar_List_Tot_Base.rev
                                                                    (FStar_List_Tot_Base.map
                                                                    (fun x ->
                                                                    (x,
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    x)))
                                                                    (FStar_InteractiveHelpers_ExploreTerm.params_of_typ_or_comp
                                                                    c))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (831))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (832))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (832))
                                                                    (Prims.of_int (91))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (833))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (833))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (834))
                                                                    (Prims.of_int (74))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (836))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_Tactics_Util.filter
                                                                    (fun
                                                                    uu___1 ->
                                                                    fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((match uu___1
                                                                    with
                                                                    | (b,
                                                                    uu___2)
                                                                    ->
                                                                    Prims.op_Negation
                                                                    (FStar_InteractiveHelpers_Base.binder_is_shadowed
                                                                    ge1 b)),
                                                                    s))
                                                                    (FStar_List_Tot_Base.rev
                                                                    (FStar_List_Tot_Base.map
                                                                    (fun x ->
                                                                    (x,
                                                                    (FStar_Reflection_Derived.type_of_binder
                                                                    x)))
                                                                    (FStar_InteractiveHelpers_ExploreTerm.params_of_typ_or_comp
                                                                    c))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (836))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (836))
                                                                    (Prims.of_int (25))
                                                                    (Prims.of_int (836))
                                                                    (Prims.of_int (84))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a13,
                                                                    ps'13) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (838))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (838))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (857))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_Tactics_Util.map
                                                                    (fun x ->
                                                                    fun ps6
                                                                    ->
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (27))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (23)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match x
                                                                    with
                                                                    | (b, ty)
                                                                    ->
                                                                    (fun ps7
                                                                    ->
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (840))
                                                                    (Prims.of_int (23))
                                                                    (Prims.of_int (840))
                                                                    (Prims.of_int (37))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (841))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "Generating assertions from global parameter: "
                                                                    (FStar_Reflection_Derived.binder_to_string
                                                                    b)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (840))
                                                                    (Prims.of_int (23))
                                                                    (Prims.of_int (840))
                                                                    (Prims.of_int (37))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (841))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (841))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (841))
                                                                    (Prims.of_int (98))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a14,
                                                                    ps'14) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (842))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_ExploreTerm.get_type_info_from_type
                                                                    ty)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (842))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (842))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (842))
                                                                    (Prims.of_int (52))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a15,
                                                                    ps'15) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'15
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (843))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_Tactics_Builtins.pack
                                                                    (FStar_Reflection_Data.Tv_Var
                                                                    (FStar_Reflection_Derived.bv_of_binder
                                                                    b)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'15
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (843))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (843))
                                                                    (Prims.of_int (22))
                                                                    (Prims.of_int (843))
                                                                    (Prims.of_int (38))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a16,
                                                                    ps'16) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'16
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (844))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (mk_has_type
                                                                    a16
                                                                    a15.FStar_InteractiveHelpers_ExploreTerm.ty)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'16
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (844))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (844))
                                                                    (Prims.of_int (23))
                                                                    (Prims.of_int (844))
                                                                    (Prims.of_int (45))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a17,
                                                                    ps'17) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'17
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (845))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (match 
                                                                    a15.FStar_InteractiveHelpers_ExploreTerm.refin
                                                                    with
                                                                    | 
                                                                    FStar_Pervasives_Native.None
                                                                    ->
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ([], s))
                                                                    | 
                                                                    FStar_Pervasives_Native.Some
                                                                    r ->
                                                                    (fun ps8
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.mk_app_norm
                                                                    ge1.FStar_InteractiveHelpers_Base.env
                                                                    r [a16])
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (848))
                                                                    (Prims.of_int (25))
                                                                    (Prims.of_int (848))
                                                                    (Prims.of_int (50))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a18,
                                                                    ps'18) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'18
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (76)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_ExploreTerm.term_has_shadowed_variables
                                                                    ge1 a18)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'18
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (76))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (53))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a19,
                                                                    ps'19) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'19
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (53)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (if a19
                                                                    then
                                                                    (fun ps9
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Discarding type refinement because of shadowed variables")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (852))
                                                                    (Prims.of_int (27))
                                                                    (Prims.of_int (852))
                                                                    (Prims.of_int (99))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a20,
                                                                    ps'20) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'20
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (852))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (852))
                                                                    (Prims.of_int (103)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ([],
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'20
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (852))
                                                                    (Prims.of_int (101))
                                                                    (Prims.of_int (852))
                                                                    (Prims.of_int (103))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'20) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'20))
                                                                    else
                                                                    (fun ps9
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Keeping type refinement")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (27))
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (66))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a20,
                                                                    ps'20) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'20
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (68))
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (72)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ([a18],
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'20
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (68))
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (72))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'20) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'20)))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'19
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (19))
                                                                    (Prims.of_int (851))
                                                                    (Prims.of_int (53)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'19) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'19)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'18) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'18)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'17
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (845))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (845))
                                                                    (Prims.of_int (23))
                                                                    (Prims.of_int (853))
                                                                    (Prims.of_int (76))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a18,
                                                                    ps'18) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'18
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (19)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a17 ::
                                                                    a18),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'18
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (17))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (19))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'18) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'18)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'17) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'17)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'16) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'16)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'15) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'15)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14)))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (27))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (18))
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (23)))))))
                                                                    a13)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (838))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (839))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (855))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (857))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (857))
                                                                    (Prims.of_int (24))
                                                                    (Prims.of_int (857))
                                                                    (Prims.of_int (49))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a14,
                                                                    ps'14) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_List_Tot_Base.flatten
                                                                    a14),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (858))
                                                                    (Prims.of_int (34))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10)
                                                                    else
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Ignoring the global parameters' types")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (862))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (862))
                                                                    (Prims.of_int (65))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a10,
                                                                    ps'10) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (863))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (863))
                                                                    (Prims.of_int (14)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ([],
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (863))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (863))
                                                                    (Prims.of_int (14))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (822))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (823))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (865))
                                                                    (Prims.of_int (32))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a10,
                                                                    ps'10) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (870))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (match 
                                                                    ((a6.ei_pre),
                                                                    with_gpre)
                                                                    with
                                                                    | 
                                                                    (FStar_Pervasives_Native.Some
                                                                    pre,
                                                                    true) ->
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_ExploreTerm.term_has_shadowed_variables
                                                                    ge1 pre)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (873))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (873))
                                                                    (Prims.of_int (50))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a11,
                                                                    ps'11) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (873))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (878))
                                                                    (Prims.of_int (26)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (if a11
                                                                    then
                                                                    (fun ps6
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Dropping the global precondition because of shadowed variables")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (875))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (875))
                                                                    (Prims.of_int (92))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (876))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (876))
                                                                    (Prims.of_int (18)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (876))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (876))
                                                                    (Prims.of_int (18))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12))
                                                                    else
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((a6.ei_pre),
                                                                    s)))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (873))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (878))
                                                                    (Prims.of_int (26)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11))
                                                                    | 
                                                                    uu___1 ->
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    s)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (870))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (871))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (879))
                                                                    (Prims.of_int (21))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a11,
                                                                    ps'11) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (883))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (if
                                                                    Prims.op_Negation
                                                                    with_gpost
                                                                    then
                                                                    fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_Pervasives_Native.None,
                                                                    []), s)
                                                                    else
                                                                    if is_let
                                                                    then
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Dropping the global postcondition and return type because we are studying a let expression")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (887))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (887))
                                                                    (Prims.of_int (118))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (888))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (888))
                                                                    (Prims.of_int (20)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_Pervasives_Native.None,
                                                                    []),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (888))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (888))
                                                                    (Prims.of_int (20))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12))
                                                                    else
                                                                    FStar_Tactics_Derived.try_with
                                                                    (fun
                                                                    uu___3 ->
                                                                    match ()
                                                                    with
                                                                    | 
                                                                    () ->
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "> Generating propositions from the global type cast")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (899))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (899))
                                                                    (Prims.of_int (81))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (900))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- known type: "
                                                                    (FStar_InteractiveHelpers_ExploreTerm.type_info_to_string
                                                                    (info.einfo).ei_ret_type)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (900))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (900))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (900))
                                                                    (Prims.of_int (86))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a13,
                                                                    ps'13) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (901))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- exp. type : "
                                                                    (FStar_InteractiveHelpers_ExploreTerm.type_info_to_string
                                                                    a6.ei_ret_type)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (901))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (901))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (901))
                                                                    (Prims.of_int (83))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a14,
                                                                    ps'14) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (87))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (903))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (cast_info_to_string
                                                                    (mk_cast_info
                                                                    v
                                                                    (FStar_Pervasives_Native.Some
                                                                    ((info.einfo).ei_ret_type))
                                                                    (FStar_Pervasives_Native.Some
                                                                    (a6.ei_ret_type)))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (26))
                                                                    (Prims.of_int (902))
                                                                    (Prims.of_int (87))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (903))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (903))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (903))
                                                                    (Prims.of_int (55))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a15,
                                                                    ps'15) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'15
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (904))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (cast_info_to_propositions
                                                                    dbg ge1
                                                                    (mk_cast_info
                                                                    v
                                                                    (FStar_Pervasives_Native.Some
                                                                    ((info.einfo).ei_ret_type))
                                                                    (FStar_Pervasives_Native.Some
                                                                    (a6.ei_ret_type))))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'15
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (904))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (904))
                                                                    (Prims.of_int (32))
                                                                    (Prims.of_int (904))
                                                                    (Prims.of_int (71))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a16,
                                                                    ps'16) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'16
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (905))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "> Propositions for global type cast:")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'16
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (905))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (905))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (905))
                                                                    (Prims.of_int (66))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a17,
                                                                    ps'17) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'17
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (906))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (FStar_InteractiveHelpers_Base.list_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    a16))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'17
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (906))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (906))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (906))
                                                                    (Prims.of_int (71))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a18,
                                                                    ps'18) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'18
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    (((a6.ei_post),
                                                                    (FStar_List_Tot_Base.rev
                                                                    a16)),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'18
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (907))
                                                                    (Prims.of_int (50))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'18) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'18)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'17) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'17)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'16) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'16)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'15) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'15))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12)))
                                                                    (fun
                                                                    uu___3 ->
                                                                    fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "Dropping the global postcondition and return type because of incoherent typing")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (910))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (910))
                                                                    (Prims.of_int (108))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (911))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (911))
                                                                    (Prims.of_int (22)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_Pervasives_Native.None,
                                                                    []),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (911))
                                                                    (Prims.of_int (14))
                                                                    (Prims.of_int (911))
                                                                    (Prims.of_int (22))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (883))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (884))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (911))
                                                                    (Prims.of_int (22))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (883))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a12
                                                                    with
                                                                    | (gpost,
                                                                    gcast_props)
                                                                    ->
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "> Instantiating global pre/post")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (915))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (915))
                                                                    (Prims.of_int (55))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a13,
                                                                    ps'13) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (921))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (921))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (922))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (924))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (926))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (pre_post_to_propositions
                                                                    dbg ge1
                                                                    a6.ei_type
                                                                    v opt_b
                                                                    (info.einfo).ei_ret_type
                                                                    a11 gpost
                                                                    (FStar_List_Tot_Base.rev
                                                                    parents)
                                                                    (if
                                                                    is_let
                                                                    then
                                                                    FStar_List_Tot_Base.rev
                                                                    children
                                                                    else
                                                                    if
                                                                    effect_type_is_stateful
                                                                    (info.einfo).ei_type
                                                                    then
                                                                    FStar_List_Tot_Base.rev
                                                                    children
                                                                    else
                                                                    parents))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (921))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (922))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (924))
                                                                    (Prims.of_int (22))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (926))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (927))
                                                                    (Prims.of_int (10))
                                                                    (Prims.of_int (928))
                                                                    (Prims.of_int (69))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a14,
                                                                    ps'14) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (926))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a14
                                                                    with
                                                                    | (ge2,
                                                                    gpre_prop,
                                                                    gpost_prop)
                                                                    ->
                                                                    (fun ps6
                                                                    ->
                                                                    match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- global pre prop: "
                                                                    (FStar_InteractiveHelpers_Base.option_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    gpre_prop)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (930))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (930))
                                                                    (Prims.of_int (89))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a15,
                                                                    ps'15) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'15
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (931))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    (Prims.strcat
                                                                    "- global post prop: "
                                                                    (FStar_InteractiveHelpers_Base.option_to_string
                                                                    FStar_Reflection_Builtins.term_to_string
                                                                    gpost_prop)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'15
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (931))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (931))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (931))
                                                                    (Prims.of_int (91))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a16,
                                                                    ps'16) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'16
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge2,
                                                                    a10,
                                                                    gpre_prop,
                                                                    gcast_props,
                                                                    gpost_prop),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'16
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'16) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'16)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'15) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'15))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'14
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (926))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'14))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (883))
                                                                    (Prims.of_int (8))
                                                                    (Prims.of_int (933))
                                                                    (Prims.of_int (62)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6))
                                                                    | (uu___1,
                                                                    uu___2)
                                                                    ->
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge1,
                                                                    [],
                                                                    FStar_Pervasives_Native.None,
                                                                    [],
                                                                    FStar_Pervasives_Native.None),
                                                                    s))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (813))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (936))
                                                                    (Prims.of_int (18))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (813))
                                                                    (Prims.of_int (29))
                                                                    (Prims.of_int (813))
                                                                    (Prims.of_int (70))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (814))
                                                                    (Prims.of_int (12))
                                                                    (Prims.of_int (935))
                                                                    (Prims.of_int (31))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a6,
                                                                    ps'6) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (809))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match a6
                                                                    with
                                                                    | (ge2,
                                                                    gparams_props,
                                                                    gpre_prop,
                                                                    gcast_props,
                                                                    gpost_prop)
                                                                    ->
                                                                    (fun ps4
                                                                    ->
                                                                    match 
                                                                    (cast_info_list_to_propositions
                                                                    dbg ge2
                                                                    info.parameters)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps4
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (940))
                                                                    (Prims.of_int (23))
                                                                    (Prims.of_int (940))
                                                                    (Prims.of_int (77))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a7,
                                                                    ps'7) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (942))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (942))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (943))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (944))
                                                                    (Prims.of_int (63))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (942))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    ((match 
                                                                    if
                                                                    FStar_InteractiveHelpers_ExploreTerm.uu___is_E_Lemma
                                                                    (info.einfo).ei_type
                                                                    then
                                                                    ([], [])
                                                                    else
                                                                    ([v],
                                                                    ((match opt_b
                                                                    with
                                                                    | FStar_Pervasives_Native.Some
                                                                    b -> 
                                                                    [b]
                                                                    | FStar_Pervasives_Native.None
                                                                    -> [])))
                                                                    with
                                                                    | (ret_values,
                                                                    ret_binders)
                                                                    ->
                                                                    (fun ps5
                                                                    ->
                                                                    match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (945))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (945))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (match ret_values
                                                                    with
                                                                    | 
                                                                    v1::[] ->
                                                                    (fun ps6
                                                                    ->
                                                                    match 
                                                                    (mk_has_type
                                                                    v1
                                                                    ((info.einfo).ei_ret_type).FStar_InteractiveHelpers_ExploreTerm.ty)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (947))
                                                                    (Prims.of_int (20))
                                                                    (Prims.of_int (947))
                                                                    (Prims.of_int (56))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (947))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (947))
                                                                    (Prims.of_int (56)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((FStar_Pervasives_Native.Some
                                                                    a8),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (947))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (947))
                                                                    (Prims.of_int (56))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8))
                                                                    | 
                                                                    uu___1 ->
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    (FStar_Pervasives_Native.None,
                                                                    s)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (945))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (945))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (946))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (948))
                                                                    (Prims.of_int (17))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a8,
                                                                    ps'8) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (950))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.opt_mk_app_norm
                                                                    ge2.FStar_InteractiveHelpers_Base.env
                                                                    (get_opt_refinment
                                                                    (info.einfo).ei_ret_type)
                                                                    ret_values)
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'8
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (950))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (950))
                                                                    (Prims.of_int (25))
                                                                    (Prims.of_int (950))
                                                                    (Prims.of_int (97))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a9,
                                                                    ps'9) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (83))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (83))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (40))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (954))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (83))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (40))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (954))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (954))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (956))
                                                                    (Prims.of_int (69))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (958))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "- generated pres:")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'9
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (952))
                                                                    (Prims.of_int (83))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (15))
                                                                    (Prims.of_int (953))
                                                                    (Prims.of_int (40))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (954))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (954))
                                                                    (Prims.of_int (16))
                                                                    (Prims.of_int (956))
                                                                    (Prims.of_int (69))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (958))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (958))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (958))
                                                                    (Prims.of_int (37))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a10,
                                                                    ps'10) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (959))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (if dbg
                                                                    then
                                                                    FStar_Tactics_Util.iter
                                                                    (fun x ->
                                                                    FStar_Tactics_Builtins.print
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    x))
                                                                    (FStar_List_Tot_Base.append
                                                                    gparams_props
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    gpre_prop
                                                                    (FStar_List_Tot_Base.append
                                                                    a7
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    pre_prop
                                                                    []))))
                                                                    else
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((), s)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'10
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (959))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (959))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (959))
                                                                    (Prims.of_int (61))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a11,
                                                                    ps'11) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (960))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (FStar_InteractiveHelpers_Base.print_dbg
                                                                    dbg
                                                                    "- generated posts:")
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'11
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (960))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (960))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (960))
                                                                    (Prims.of_int (38))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a12,
                                                                    ps'12) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (961))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    (match 
                                                                    (if dbg
                                                                    then
                                                                    FStar_Tactics_Util.iter
                                                                    (fun x ->
                                                                    FStar_Tactics_Builtins.print
                                                                    (FStar_Reflection_Builtins.term_to_string
                                                                    x))
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    a8
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    a9
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    post_prop
                                                                    (FStar_List_Tot_Base.append
                                                                    gcast_props
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    gpost_prop
                                                                    [])))))
                                                                    else
                                                                    (fun s ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((), s)))
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'12
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (961))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (961))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (961))
                                                                    (Prims.of_int (62))))))
                                                                    with
                                                                    | 
                                                                    FStar_Tactics_Result.Success
                                                                    (a13,
                                                                    ps'13) ->
                                                                    (match 
                                                                    FStar_Tactics_Types.tracepoint
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))
                                                                    with
                                                                    | 
                                                                    true ->
                                                                    FStar_Tactics_Result.Success
                                                                    ((ge2,
                                                                    {
                                                                    FStar_InteractiveHelpers_Propositions.pres
                                                                    =
                                                                    (FStar_List_Tot_Base.append
                                                                    gparams_props
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    gpre_prop
                                                                    (FStar_List_Tot_Base.append
                                                                    a7
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    pre_prop
                                                                    []))));
                                                                    FStar_InteractiveHelpers_Propositions.posts
                                                                    =
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    a8
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    a9
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    post_prop
                                                                    (FStar_List_Tot_Base.append
                                                                    gcast_props
                                                                    (FStar_InteractiveHelpers_Base.opt_cons
                                                                    gpost_prop
                                                                    [])))))
                                                                    }),
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'13
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'13)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'12)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'11)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10) ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e,
                                                                    ps'10))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'9)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'8)))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.incr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'7
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (942))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (943))
                                                                    (Prims.of_int (6))
                                                                    (Prims.of_int (944))
                                                                    (Prims.of_int (63))))))
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (942))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39))))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'7))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'6
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (809))
                                                                    (Prims.of_int (4))
                                                                    (Prims.of_int (962))
                                                                    (Prims.of_int (39)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'6)))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'5
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (802))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'5)))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'4))))
                                                                    (FStar_Tactics_Types.decr_depth
                                                                    (FStar_Tactics_Types.set_proofstate_range
                                                                    ps'3
                                                                    (FStar_Range.prims_to_fstar_range
                                                                    (Prims.mk_range
                                                                    "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                    (Prims.of_int (794))
                                                                    (Prims.of_int (2))
                                                                    (Prims.of_int (963))
                                                                    (Prims.of_int (7)))))))
                                                                    | 
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'3)))
                                                                  | FStar_Tactics_Result.Failed
                                                                    (e, ps'2)
                                                                    ->
                                                                    FStar_Tactics_Result.Failed
                                                                    (e, ps'2)))))
                                                      (FStar_Tactics_Types.decr_depth
                                                         (FStar_Tactics_Types.set_proofstate_range
                                                            ps'1
                                                            (FStar_Range.prims_to_fstar_range
                                                               (Prims.mk_range
                                                                  "experimental/FStar.InteractiveHelpers.Effectful.fst"
                                                                  (Prims.of_int (773))
                                                                  (Prims.of_int (2))
                                                                  (Prims.of_int (963))
                                                                  (Prims.of_int (7)))))))
                                           | FStar_Tactics_Result.Failed
                                               (e, ps'1) ->
                                               FStar_Tactics_Result.Failed
                                                 (e, ps'1))))
                            | FStar_Tactics_Result.Failed (e, ps') ->
                                FStar_Tactics_Result.Failed (e, ps')